	protected String getDocumentLocation(IEditorPart currentEditor,
			boolean appendRoot) {
		
		IEditorInput cc;
		String WorkspaceRoot;
		try {
		IWorkspaceRoot myWorkspaceRoot = getWorkspaceRoot();
		WorkspaceRoot = myWorkspaceRoot.getLocation().toOSString();
		cc = currentEditor.getEditorInput();
		} catch(Exception e) {
			return "";
		}
		
		if (cc == null)
			return "";
		
		if ((cc instanceof SyncInfoCompareInput)
				|| (cc instanceof CompareEditorInput)) {

			CompareEditorInput test = (CompareEditorInput) cc;
			if (test.getCompareResult() == null)
				return "";
			if (appendRoot)
				return WorkspaceRoot + test.getCompareResult().toString();
			else
				return test.getCompareResult().toString();

		}

		IFile loc = getDocumentIFile(currentEditor);
		if (appendRoot) {
			return WorkspaceRoot + loc.getFullPath().toOSString();
		} else {
			return loc.getFullPath().toOSString();
		}
	}

