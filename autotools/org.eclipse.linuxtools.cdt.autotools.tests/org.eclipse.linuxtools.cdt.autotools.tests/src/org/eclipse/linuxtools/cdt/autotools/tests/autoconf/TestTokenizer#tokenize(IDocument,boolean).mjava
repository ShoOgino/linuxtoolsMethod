	protected List<Token> tokenize(IDocument document, boolean isM4Mode) {
		tokenizerErrors = new ArrayList<Exception>();
		AutoconfTokenizer tokenizer = new AutoconfTokenizer(document, new IAutoconfErrorHandler() {

			public void handleError(ParseException exception) {
				tokenizerErrors.add(exception);
			}
			
		});
		tokenizer.setM4Context(isM4Mode);
		
		List<Token> tokens = tokenize(tokenizer);
		return tokens;
	}

