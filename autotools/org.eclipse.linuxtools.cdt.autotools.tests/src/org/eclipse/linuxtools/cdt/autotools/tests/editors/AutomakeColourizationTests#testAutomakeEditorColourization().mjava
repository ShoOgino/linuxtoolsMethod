	public void testAutomakeEditorColourization() throws Exception {
		// # This is a comment
		IToken token0 = getNextToken();
		assertTrue(token0 instanceof Token);
		assertEquals(codeScanner.getTokenLength(), 20);
		assertEquals(codeScanner.getTokenOffset(), 0);

		Token token = (Token) token0;
		TextAttribute ta = (TextAttribute) token.getData();
		assertEquals(ColorManager.MAKE_COMMENT_RGB, ((Color) ta.getForeground()).getRGB());

		// if CONDITION
		token0 = getNextToken();
		assertTrue(token0 instanceof Token);
		assertEquals(codeScanner.getTokenLength(), 2);
		assertEquals(codeScanner.getTokenOffset(), 20);

		token = (Token) token0;
		TextAttribute attribute = (TextAttribute) token.getData();
		assertEquals(ColorManager.MAKE_KEYWORD_RGB, ((Color) attribute.getForeground()).getRGB());

		// blank space between "if" and "CONDITION"
		token0 = getNextToken();
		assertTrue(token0 instanceof Token);
		assertEquals(codeScanner.getTokenLength(), 1);
		assertEquals(codeScanner.getTokenOffset(), 22);

		token = (Token) token0;
		attribute = (TextAttribute) token.getData();
		assertNull(attribute);

		// if CONDITION
		token0 = getNextToken();
		assertTrue(token0 instanceof Token);
		assertEquals(codeScanner.getTokenLength(), 9);
		assertEquals(codeScanner.getTokenOffset(), 23);

		token = (Token) token0;
		attribute = (TextAttribute) token.getData();
		assertEquals(ColorManager.MAKE_DEFAULT_RGB, ((Color) attribute.getForeground()).getRGB());

		// line break
		token0 = getNextToken();
		assertTrue(token0 instanceof Token);
		assertEquals(codeScanner.getTokenLength(), 1);
		assertEquals(codeScanner.getTokenOffset(), 32);

		token = (Token) token0;
		attribute = (TextAttribute) token.getData();
		assertNull(attribute);

		// MACRO = case1
		token0 = getNextToken();
		assertTrue(token0 instanceof Token);
		assertEquals(codeScanner.getTokenLength(), 14);
		assertEquals(codeScanner.getTokenOffset(), 33);

		token = (Token) token0;
		attribute = (TextAttribute) token.getData();
		assertEquals(ColorManager.MAKE_MACRO_DEF_RGB, ((Color) attribute.getForeground()).getRGB());

		// else
		token0 = getNextToken();
		assertTrue(token0 instanceof Token);
		assertEquals(codeScanner.getTokenLength(), 4);
		assertEquals(codeScanner.getTokenOffset(), 47);

		token = (Token) token0;
		attribute = (TextAttribute) token.getData();
		assertEquals(ColorManager.MAKE_KEYWORD_RGB, ((Color) attribute.getForeground()).getRGB());

		// line break
		token0 = getNextToken();
		assertTrue(token0 instanceof Token);
		assertEquals(codeScanner.getTokenLength(), 1);
		assertEquals(codeScanner.getTokenOffset(), 51);

		token = (Token) token0;
		attribute = (TextAttribute) token.getData();
		assertNull(attribute);

		// MACRO = case2
		token0 = getNextToken();
		assertTrue(token0 instanceof Token);
		assertEquals(codeScanner.getTokenLength(), 14);
		assertEquals(codeScanner.getTokenOffset(), 52);

		token = (Token) token0;
		attribute = (TextAttribute) token.getData();
		assertEquals(ColorManager.MAKE_MACRO_DEF_RGB, ((Color) attribute.getForeground()).getRGB());

		// $(MACRO)
		token0 = getNextToken();
		assertTrue(token0 instanceof Token);
		assertEquals(codeScanner.getTokenLength(), 8);
		assertEquals(codeScanner.getTokenOffset(), 66);

		token = (Token) token0;
		attribute = (TextAttribute) token.getData();
		assertEquals(ColorManager.MAKE_MACRO_REF_RGB, ((Color) attribute.getForeground()).getRGB());

		// line break
		token0 = getNextToken();
		assertTrue(token0 instanceof Token);
		assertEquals(codeScanner.getTokenLength(), 1);
		assertEquals(codeScanner.getTokenOffset(), 74);

		token = (Token) token0;
		attribute = (TextAttribute) token.getData();
		assertNull(attribute);
		
		// ${MACRO}
		token0 = getNextToken();
		assertTrue(token0 instanceof Token);
		assertEquals(codeScanner.getTokenLength(), 8);
		assertEquals(codeScanner.getTokenOffset(), 75);

		token = (Token) token0;
		attribute = (TextAttribute) token.getData();
		assertEquals(ColorManager.MAKE_MACRO_REF_RGB, ((Color) attribute.getForeground()).getRGB());
	}

