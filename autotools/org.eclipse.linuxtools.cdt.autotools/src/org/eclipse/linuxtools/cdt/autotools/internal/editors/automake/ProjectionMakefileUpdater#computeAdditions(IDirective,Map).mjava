	private void computeAdditions(IDirective element, Map map) {
		
		boolean createProjection= false;
		
		boolean collapse= false;
			
		if (element instanceof IConditional) {
			collapse= fAllowCollapsing && fCollapseConditional;
			createProjection= true;
		} else if (element instanceof IMacroDefinition) {
			collapse= fAllowCollapsing && fCollapseMacroDef;
			createProjection= true;
		} else if (element instanceof IRule) {
			collapse= fAllowCollapsing && fCollapseRule;
			createProjection= true;
		}
	
		if (createProjection) {
			Position position= createProjectionPosition(element);
			if (position != null) {
				map.put(new MakefileProjectionAnnotation(element, fAllowCollapsing, true), position);
			}
		}
	}

