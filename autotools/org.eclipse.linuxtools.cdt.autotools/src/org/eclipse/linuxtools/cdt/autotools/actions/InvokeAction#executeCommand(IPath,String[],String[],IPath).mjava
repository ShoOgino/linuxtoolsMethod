	protected HashMap executeCommand(IPath command,
			String[] argumentList, String[] envList, IPath execDir) {

		ByteArrayOutputStream stdout = new ByteArrayOutputStream();
		ByteArrayOutputStream stderr = new ByteArrayOutputStream();
		CommandLauncher cmdL = new CommandLauncher();

		// invoke command
		Process automakeProcess = cmdL.execute(command, argumentList, envList,
				execDir);

		if (cmdL.waitAndRead(stdout, stderr) == CommandLauncher.OK) {
			try {
				automakeProcess.getOutputStream().close();
			} catch (IOException e) {
				// ignore
			}
		} else {
			// failed to execute command
			showError(InvokeMessages
									.getString("InvokeAction.execute.windowTitle.error"), InvokeMessages //$NON-NLS-1$
									.getString("InvokeAction.execute.message") //$NON-NLS-1$
									+ command.toOSString()); //$NON-NLS-1$
			return null;
		}

		HashMap outputs = new HashMap();

		outputs.put("stdout", stdout.toString()); //$NON-NLS-1$
		outputs.put("stderr", stderr.toString()); //$NON-NLS-1$

		try {
			stdout.close();
			stderr.close();
		} catch (IOException e) {
			// ignore
		}

		return outputs;
	}

