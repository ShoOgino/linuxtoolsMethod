	public void performCommand(String[] cmd, int fd) {
		BufferedReader buffData = null;
		BufferedReader buffTemp = null;

		try {

			Process proc;
			if (workDir != null) {
				Path path = new Path(workDir.getAbsolutePath());
				IFileStore workDirStore = EFS.getLocalFileSystem().getStore(path);
				proc = RuntimeProcessFactory.getFactory().exec(cmd, null, workDirStore, null);
			} else {
				proc = RuntimeProcessFactory.getFactory().exec(cmd, null);
			}
			StringBuffer data = new StringBuffer();
			StringBuffer temp = new StringBuffer();

			switch (fd) {
			case 2:
				buffData = new BufferedReader(new InputStreamReader(proc.getErrorStream()));
				buffTemp = new BufferedReader(new InputStreamReader(proc.getInputStream()));
				readStream(buffTemp, temp);
				readStream(buffData, data);
				break;
			case 1:
				// fall through to default case
			default:
				buffData = new BufferedReader(new InputStreamReader(proc.getInputStream()));
				buffTemp = new BufferedReader(new InputStreamReader(proc.getErrorStream()));
				readStream(buffData, data);
				readStream(buffTemp, temp);
				break;
				}

			joinAll();
			text = data.toString();
			printToConsole(proc, temp.toString());


		} catch (IOException e) {
			text = ""; //$NON-NLS-1$
		} catch (InterruptedException e){
			text = ""; //$NON-NLS-1$
		}finally {
			try {
				if (buffData != null) {
					buffData.close();
				}
				if (buffTemp != null) {
					buffTemp.close();
				}
			} catch (IOException e) {
				// continue
			}
		}
	}

