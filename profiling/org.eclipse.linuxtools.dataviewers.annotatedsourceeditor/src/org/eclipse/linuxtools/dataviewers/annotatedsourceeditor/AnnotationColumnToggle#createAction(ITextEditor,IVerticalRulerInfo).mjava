	@Override
	protected IAction createAction(ITextEditor editor,
			IVerticalRulerInfo rulerInfo) {
		return new Action() {
			@Override
			public void runWithEvent(Event event) {
				toggleSTRuler();
			}

			private void toggleSTRuler() {
				// globally
				IPreferenceStore store = EditorsUI.getPreferenceStore();
				store.setValue(STAnnotatedCSourceEditor.ST_RULER,
						!isSTRulerVisible());
			}

			protected boolean isSTRulerVisible() {
				IPreferenceStore store = EditorsUI.getPreferenceStore();
				return store != null ? store
						.getBoolean(STAnnotatedCSourceEditor.ST_RULER) : true;
			}
		};
	}

