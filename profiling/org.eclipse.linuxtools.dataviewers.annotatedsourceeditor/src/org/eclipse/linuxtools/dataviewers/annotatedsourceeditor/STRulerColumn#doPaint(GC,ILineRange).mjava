    /**
     * Draws the ruler column.
     *
     * @param gc
     *            the GC to draw into
     * @param visibleLines
     *            the visible model lines
     * @since 3.2
     */
    void doPaint(GC gc, ILineRange visibleLines) {
        Display display = fCachedTextWidget.getDisplay();

        // draw diff info
        int y = -JFaceTextUtil.getHiddenTopLinePixels(fCachedTextWidget);

        int lastLine = end(visibleLines);
        for (int line = visibleLines.getStartLine(); line < lastLine; line++) {
            int widgetLine = JFaceTextUtil.modelLineToWidgetLine(fCachedTextViewer, line);
            if (widgetLine == -1)
                continue;

            int lineHeight = fCachedTextWidget.getLineHeight(fCachedTextWidget.getOffsetAtLine(widgetLine));
            paintLine(line, y, lineHeight, gc, display);
            y += lineHeight;
        }
    }

