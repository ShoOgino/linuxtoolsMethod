    /**
     * The constructor.
     *
     * @param shell
     *            the shell used by the dialog
     * @param viewer
     *            the viewer inputed to the disalog
     * @param useEclipseSwtchart Whether Eclipse.org SWTChart to be used or the old Sourceforge library
     * @since 6.1
     */
    public ChartAction(Shell shell, AbstractSTViewer viewer, boolean useEclipseSwtchart) {
        super(Messages.ChartConstants_CREATE_CHART, Activator.getImageDescriptor("icons/chart_icon.png")); //$NON-NLS-1$
        dialog = new ChartDialog2(shell, viewer);
        setEnabled(!viewer.getViewer().getSelection().isEmpty());
        viewer.getViewer().addSelectionChangedListener(event -> setEnabled(!event.getSelection().isEmpty()));
        this.useEclipseSwtChart = useEclipseSwtchart;
    }

