    /**
     * Removes focus changed listener from browser and stores settings for re-open.
     */
    private void handleDialogClose() {

        // remove listeners
        if (okToUse(fFindField)) {
            fFindField.removeModifyListener(fFindModifyListener);
        }

        if (fParentShell != null) {
            fParentShell.removeShellListener(fActivationListener);
            fParentShell = null;
        }

        getShell().removeShellListener(fActivationListener);

        // store current settings in case of re-open
        storeSettings();

        // prevent leaks
        fActiveShell = null;
        fTarget = null;

    }

