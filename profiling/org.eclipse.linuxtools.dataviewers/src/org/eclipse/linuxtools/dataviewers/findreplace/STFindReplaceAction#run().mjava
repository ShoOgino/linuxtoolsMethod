    /*
     * @see IAction#run()
     */
    public void run() {
        if (fTarget == null) {
            return;
        }

        final STFindReplaceDialog dialog;
        final boolean isEditable;

        if (fShell == null) {
            if (fgFindReplaceDialogStub != null) {
                Shell shell = fWorkbenchPart.getSite().getShell();
                fgFindReplaceDialogStub.checkShell(shell);
            }
            if (fgFindReplaceDialogStub == null)
                fgFindReplaceDialogStub = new FindReplaceDialogStub(fWorkbenchPart.getSite());

            if (fWorkbenchPart instanceof ITextEditorExtension2)
                isEditable = ((ITextEditorExtension2) fWorkbenchPart).isEditorInputModifiable();
            else
                isEditable = fTarget.isEditable();

            dialog = fgFindReplaceDialogStub.getDialog();

        } else {
            if (fgFindReplaceDialogStubShell != null) {
                fgFindReplaceDialogStubShell.checkShell(fShell);
            }
            if (fgFindReplaceDialogStubShell == null)
                fgFindReplaceDialogStubShell = new FindReplaceDialogStub(fShell);

            isEditable = fTarget.isEditable();
            dialog = fgFindReplaceDialogStubShell.getDialog();
        }

        dialog.updateTarget(fTarget, isEditable, true);
        dialog.open();
    }

