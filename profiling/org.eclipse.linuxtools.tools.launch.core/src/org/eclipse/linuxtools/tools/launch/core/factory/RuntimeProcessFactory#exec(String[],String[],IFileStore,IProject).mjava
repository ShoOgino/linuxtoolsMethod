	public Process exec(String cmdarray[], String[] envp, IFileStore dir, IProject project)
		throws IOException {
			
		String command = cmdarray[0];
		URI uri = URI.create(command);

		Process p = null;
		try {
			cmdarray = fillPathCommand(cmdarray, project);
			
			IPath path = new Path(proxy.toPath(uri));
			IRemoteCommandLauncher launcher = RemoteProxyManager.getInstance().getLauncher(project);
			envp = updateEnvironment(envp, project);
			
			IPath changeToDir;
			if (dir == null){
				changeToDir = null;
			} else{ 
				changeToDir = new Path(proxy.toPath(dir.toURI()));
			}
			
			List<String> cmdlist = new ArrayList<String>(Arrays.asList(cmdarray));
			cmdlist.remove(0);
			cmdlist.toArray(cmdarray);
			cmdarray = cmdlist.toArray(new String[0]);

			p = launcher.execute(path, cmdarray, envp, changeToDir , new NullProgressMonitor());
		} catch (CoreException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}

		return p;
	}

