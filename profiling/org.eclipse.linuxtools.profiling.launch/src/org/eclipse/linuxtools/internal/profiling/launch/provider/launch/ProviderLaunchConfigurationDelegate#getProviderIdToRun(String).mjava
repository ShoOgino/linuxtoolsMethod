	/**
	 * Get a provider id to run for the given profiling type.
	 *
	 * This first checks for a provider in the preferences, and if
	 * none can be found it will look for the provider with the
	 * highest priority for the specified type. If this fails,
	 * it will look for the default provider.
	 *
	 * @param type a profiling type
	 * @return a provider id that contributes to the specified type
	 */
	public static String getProviderIdToRun(String type) {
		// Look in the preferences for a provider
		String providerId = ConfigurationScope.INSTANCE.getNode(
				ProviderProfileConstants.PLUGIN_ID).get(
				ProviderProfileConstants.PREFS_KEY + type, "");
		if (providerId.equals("") || ProviderFramework.getConfigurationDelegateFromId(providerId) == null) {
			// Get highest priority provider
			providerId = ProviderFramework
					.getHighestProviderId(type);
		}
		return providerId;
	}

