	/**
	 * @see org.eclipse.ui.IActionDelegate#run(org.eclipse.jface.action.IAction)
	 */
	public void run(IAction action) {
		if (selection instanceof IStructuredSelection) {
			for (Object element : ((IStructuredSelection) selection).toList()) {
				IFile rpmFile = null;
				if (element instanceof IFile) {
					rpmFile = (IFile) element;
				} else if (element instanceof IAdaptable) {
					rpmFile = (IFile) ((IAdaptable) element)
							.getAdapter(IFile.class);
				}
				if (rpmFile != null) {
					try {
						if (Utils.fileExist(Activator.getRpmlintPath())) {
							String output = Utils.runCommandToString(Activator
									.getRpmlintPath(),
									"-i", rpmFile.getLocation() //$NON-NLS-1$
											.toString());
							MessageConsole myConsole = findConsole(Messages.RunRpmlintAction_0);
							MessageConsoleStream out = myConsole
									.newMessageStream();
							myConsole.clearConsole();
							myConsole.activate();
							out.println(output);
						} else {
							IStatus warning = new Status(
									IStatus.WARNING,
									Activator.PLUGIN_ID,
									1,
									Messages.RunRpmlintAction_1,
									null);
							ErrorDialog.openError(PlatformUI.getWorkbench()
									.getActiveWorkbenchWindow().getShell(),
									Messages.RunRpmlintAction_2,
									null, warning);
						}
					} catch (IOException e) {
						// FIXME: rpmlint is not installed in the default place
						// -> ask user to open the prefs page.
						RpmlintLog.logError(e);
					}
				}
			}
		}

	}

