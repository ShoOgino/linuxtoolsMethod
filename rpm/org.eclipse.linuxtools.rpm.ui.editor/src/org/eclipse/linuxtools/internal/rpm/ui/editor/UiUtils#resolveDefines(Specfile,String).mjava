	/**
	 * Resolve defines for a give string, if a define is not found or if
	 * there is some other error, the original string is returned.
	 *
	 * @param stringToResolve The string to resolve.
	 * @return resolved string
	 */
	public static String resolveDefines(Specfile specfile, String stringToResolve) {
		String originalString = stringToResolve;
		SpecfileDefine define;
		try {
			Pattern variablePattern = Pattern.compile("%\\{(\\S+?)\\}"); //$NON-NLS-1$
			Matcher variableMatcher = variablePattern.matcher(stringToResolve);
			while (variableMatcher.find()) {
				define = specfile.getDefine(variableMatcher.group(1));
				if (define != null) {
					stringToResolve = stringToResolve.replaceAll(variableMatcher.group(1), define.getStringValue());
				} else {
					return originalString;
				}
			}
			if (!stringToResolve.equals(originalString)) {
				stringToResolve = stringToResolve.replaceAll("\\%\\{|\\}", ""); //$NON-NLS-1$ //$NON-NLS-2$
			}
			return stringToResolve;
		} catch (Exception e) {
			return originalString;
		}
	}

