	/**
	 * Copies sources from the project's BUILD directory to the project root.
	 * 
	 * @throws CoreException
	 *             if copying fails
	 */
	private void copySources() throws CoreException {
		// Copy all sources to the project root
		IResource[] sources = null;
		if (getSourceRPM().getSourcesFolder() != null) {
			sources = getSourceRPM().getSourcesFolder().members();
		} else {
			getConfiguration().getBuildFolder().members();
		}
		for (int i = 0; i < sources.length; i++) {
			IPath path = getProject().getFullPath().addTrailingSeparator();
			path = path.append(sources[i].getName());
			if (sources[i].getType() == IResource.FILE) {
				IFile oldFile = getProject().getParent().getFile(path);
				IFile newFile = getProject().getFile(
						sources[i].getProjectRelativePath());
				if (oldFile.exists()) {
					oldFile.setContents(newFile.getContents(), false, true,
							null);
				} else {
					sources[i].copy(path, false, null);
				}
			} else if (sources[i].getType() == IResource.FOLDER) {
				IFolder oldDir = getProject().getParent().getFolder(path);
				if (oldDir.exists()) {
					oldDir.delete(false, true, null);
				}
				sources[i].copy(path, false, null);
			}
		}
		getProject().refreshLocal(IResource.DEPTH_INFINITE, null);
	}

