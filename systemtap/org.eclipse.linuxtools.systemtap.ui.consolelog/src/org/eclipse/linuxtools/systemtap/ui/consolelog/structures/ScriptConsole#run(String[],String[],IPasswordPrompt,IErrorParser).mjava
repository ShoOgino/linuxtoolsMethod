	/**
	 * Runs the provied command in this ScriptConsole instance.
	 * @param command The command and arguments to run.
	 * @param envVars The environment variables to use while running
	 * @param prompt The prompt to get the users password if needed.
	 * @param errorParser The parser to handle error messages generated by the command
	 */
	public void run(String[] command, String[] envVars, IPasswordPrompt prompt, IErrorParser errorParser) {
	//	if(subscription.init())
	//	{
		createConsoleDaemon();
		if (errorParser != null)
		createErrorDaemon(errorParser);
	    cmd = new LoggedCommand2(command, envVars, prompt, 100,this.getName());
	    if (errorDaemon != null)
	    	cmd.addErrorStreamListener(errorDaemon);
        cmd.addInputStreamListener(consoleDaemon);
        cmd.start();
        activate();
        ConsolePlugin.getDefault().getConsoleManager().showConsoleView(this);
	//	subscription.addErrorStreamListener(errorDaemon);
	//	subscription.addInputStreamListener(consoleDaemon);
		
	//	if (!subscription.isRunning())
	//	{
	//		subscription.start();
	//	}
	//	ConsolePlugin.getDefault().getConsoleManager().showConsoleView(this);
	//	}
	//	else
	//	{
		//	setName(Localization.getString("ScriptConsole.Terminated") + super.getName());
	//		subscription.interrupt();
			//subscription.delSubscription();
			//ConsolePlugin.getDefault().getConsoleManager().removeConsoles(new IConsole[] {this});
		//}
	} 

