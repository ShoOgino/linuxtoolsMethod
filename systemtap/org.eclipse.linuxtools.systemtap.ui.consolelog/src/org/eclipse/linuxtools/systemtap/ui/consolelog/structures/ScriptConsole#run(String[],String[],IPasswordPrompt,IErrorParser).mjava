	/**
	 * Runs the provided command in this ScriptConsole instance.
	 * @param command The command and arguments to run.
	 * @param envVars The environment variables to use while running
	 * @param prompt The prompt to get the users password if needed.
	 * @param errorParser The parser to handle error messages generated by the command
	 */
	public void run(String[] command, String[] envVars, IPasswordPrompt prompt, IErrorParser errorParser) {
	    cmd = new LoggedCommand2(command, envVars, prompt, 100,this.getName());
		this.stopCommand = new Runnable() {
			public void run() {
				ScpExec stop = new ScpExec(new String[]{getStopString()}, getModuleName());
				stop.start();
			}
		};
	    this.run(cmd, errorParser);
	}

