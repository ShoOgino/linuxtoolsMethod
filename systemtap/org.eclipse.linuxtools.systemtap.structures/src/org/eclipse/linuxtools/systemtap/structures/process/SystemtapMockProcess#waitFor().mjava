	@Override
	public int waitFor() {
		if (block && !stopped) {
    		try {
    			synchronized (this) {
    				wait();
    			}
    		} catch (InterruptedException e) {
    			//Ignore
    		}
		}
		return exitcode;
	}

