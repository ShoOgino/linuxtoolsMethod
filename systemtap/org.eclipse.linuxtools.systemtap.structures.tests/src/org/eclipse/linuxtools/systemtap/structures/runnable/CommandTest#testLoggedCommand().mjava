	@Test
	public void testLoggedCommand() throws CoreException {
		tc.dispose();

		SystemtapMockProcess process = new SystemtapMockProcess("stap -v -p1 -e probe nosuchfunc{}", "", true);
		SystemtapProcessFactory.setMockStap(process);
		tc = new Command(new String[] {"stap", "-v", "-p1", "-e", "probe nosuchfunc{}"}, null);
		tc.start();
		assertTrue(tc.isRunning());
		assertFalse(tc.isDisposed());
		process.stop();
		tc.stop();
		assertFalse(tc.isRunning());
		assertFalse(tc.isDisposed());
		tc.dispose();

		process = new SystemtapMockProcess("stap -v -p1 -e probe nosuchfunc{}", "", true);
		SystemtapProcessFactory.setMockStap(process);
		tc = new Command(new String[] {"stap", "-v", "-p1", "-e", "probe nosuchfunc{}"}, null);
		tc.start();
		assertTrue(tc.isRunning());
		assertFalse(tc.isDisposed());
		process.stop();
		tc.stop();
		assertFalse(tc.isRunning());
		assertFalse(tc.isDisposed());
		tc.dispose();
	}

