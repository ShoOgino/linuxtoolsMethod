    /**
     * Forcefully set this parser's tree, and subsequently fire update events
     * that normally get called when a parse operation completes.
     * @param tree The tree to put into this parser.
     */
    final synchronized void setTree(TreeNode tree) {
        String errorMessage = isValidTree(tree);
        if (errorMessage != null) {
            throw new IllegalArgumentException(errorMessage);
        }
        cancel();
        forcedTree = tree;
        schedule();
    }

