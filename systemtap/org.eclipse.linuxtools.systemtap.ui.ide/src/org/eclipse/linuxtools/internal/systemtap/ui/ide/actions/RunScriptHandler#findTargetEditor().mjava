	/**
	 * Finds the editor containing the target script to run, so the script can be saved
	 * when it is run, if appropriate.
	 * The script is saved when it is run with the "simple" run button on the toolbar (path == null),
	 * or if the script is outside of a project (working with a PathEditorInput).
	 */
	private void findTargetEditor() {
		ed = null;
		shell = null;

		if (path == null) {
			IWorkbenchWindow window = PlatformUI.getWorkbench().getActiveWorkbenchWindow();
			ed = window.getActivePage().getActiveEditor();
			shell = window.getShell();
			return;
		}

		for (IWorkbenchWindow window : PlatformUI.getWorkbench().getWorkbenchWindows()) {
			IEditorPart edTest = window.getActivePage().getActiveEditor();
			if (edTest != null && matchesEditor(edTest.getEditorInput(), edTest, window.getShell())) {
				return;
			}
			for (IEditorReference ref : window.getActivePage().getEditorReferences()) {
				try {
					if (matchesEditor(ref.getEditorInput(), ref.getEditor(false), window.getShell())) {
						return;
					}
				} catch (PartInitException e) {
					continue;
				}
			}
		}
	}

