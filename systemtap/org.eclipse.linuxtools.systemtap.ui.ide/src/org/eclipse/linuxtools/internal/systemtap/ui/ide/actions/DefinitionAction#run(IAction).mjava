	/**
	 * The main body of the event. This code gets the filename from the selected entry in the viewer,
	 * then opens a new <code>STPEditor</code> for that file.
	 */
	@Override
	public void run(IAction action) {
		if(!isEnabled())
			return;
		Object o = selection.getFirstElement();
		if(!(o instanceof TreeDefinitionNode))
			return;
		TreeDefinitionNode t = (TreeDefinitionNode)o;
		String filename = t.getDefinition();
		File file = new File(filename);
		OpenFileAction open = new OpenFileAction();
		open.run(file);
		if (open.isSuccessful()) {
			IEditorPart editorPart = PlatformUI.getWorkbench().getActiveWorkbenchWindow().getActivePage().getActiveEditor();
			STPEditor editor = (STPEditor)editorPart;
			int line;

			if (!(t.getData() instanceof FunctionNodeData))
				line = probeFind(t, editor);
			else
				line = functionFind(t, editor);

			editor.jumpToLocation(++line, 0);
		}
	}

