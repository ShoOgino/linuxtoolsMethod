    /**
     * Test the instantiateAnalysis method
     */
    @Test
    public void testInstantiate() {
        TmfTraceElement traceElement = getTraceElement();

        TmfAnalysisElement analysis = null;
        for (TmfAnalysisElement analysisElement : traceElement.getAvailableAnalysis()) {
            if (analysisElement.getAnalysisId().equals(MODULE_UI)) {
                analysis = analysisElement;
            }
        }
        assertNotNull(analysis);

        /* Instantiate an analysis on a trace that is closed */
        traceElement.closeEditors();
        analysis.activateParent();

        ITmfTrace trace = null;
        int cnt = 0;

        /* Give some time to the trace to open */
        while ((trace == null) && (cnt++ < 10)) {

            ProjectModelTestData.delayThread(500);

            /* Get the analysis module associated with the element */
            trace = traceElement.getTrace();
        }

        assertNotNull(trace);
        TestAnalysisUi module = (TestAnalysisUi) trace.getAnalysisModule(analysis.getAnalysisId());
        assertNotNull(module);

    }

