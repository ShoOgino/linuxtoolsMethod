    private static IHost[] getSuitableHosts() {
        // need shells and files
        ArrayList<IHost> result = new ArrayList<>();
        ArrayList<IHost> shellConnections = new ArrayList<>(
                Arrays.asList(RSECorePlugin.getTheSystemRegistry()
                        .getHostsBySubSystemConfigurationCategory("shells"))); //$NON-NLS-1$

        for (IHost connection : shellConnections) {
            if (!connection.getSystemType().isLocal()) {
                ISubSystem[] subSystems = connection.getSubSystems();
                for (int i = 0; i < subSystems.length; i++) {
                    if (subSystems[i] instanceof IFileServiceSubSystem) {
                        result.add(connection);
                        break;
                    }
                }
            }
        }

        return result.toArray(new IHost[result.size()]);
    }

