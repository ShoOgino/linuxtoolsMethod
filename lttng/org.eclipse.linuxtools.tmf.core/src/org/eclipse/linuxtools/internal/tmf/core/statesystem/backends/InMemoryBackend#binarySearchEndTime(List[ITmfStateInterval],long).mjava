    private static int binarySearchEndTime(List<ITmfStateInterval> list, long time) {
        ITmfStateInterval dummyInterval = new TmfStateInterval(-1, time, -1, null);
        int mid = Collections.binarySearch(list, dummyInterval, END_COMPARATOR);

        /* The returned value is < 0 if the exact key was not found. */
        if (mid < 0) {
            mid = -mid;
        }

        /*
         * Collections.binarySearch doesn't guarantee which element is returned
         * if it falls on one of many equal ones. So make sure we are at the
         * first one provided.
         */
        while ((mid > 0) &&
                (list.get(mid).getEndTime() == list.get(mid-1).getEndTime())) {
            mid--;
        }
        return mid;
    }

