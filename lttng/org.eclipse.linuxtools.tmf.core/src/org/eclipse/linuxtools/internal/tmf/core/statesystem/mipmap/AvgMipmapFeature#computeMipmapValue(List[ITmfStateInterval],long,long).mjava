    @Override
    protected ITmfStateValue computeMipmapValue(List<ITmfStateInterval> lowerIntervals, long startTime, long endTime) {
        long range = endTime - startTime;
        if (range <= 0) {
            return TmfStateValue.newValueDouble(0.0);
        }
        double sum = 0.0;
        try {
            for (ITmfStateInterval interval : lowerIntervals) {
                ITmfStateValue value = interval.getStateValue();
                long duration = interval.getEndTime() - interval.getStartTime();
                if (value.getType() == Type.DOUBLE) {
                    sum += value.unboxDouble() * duration;
                } else {
                    sum += (double) value.unboxLong() * duration;
                }
            }
        } catch (StateValueTypeException e) {
            e.printStackTrace();
        }
        double average = sum / range;
        ITmfStateValue avgValue = TmfStateValue.newValueDouble(average);
        return avgValue;
    }

