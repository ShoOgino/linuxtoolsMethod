    @Override
    public void run() {
        if (intervalQueue == null) {
            Activator.logError("Cannot start the storage backend without its interval queue."); //$NON-NLS-1$
            return;
        }
        HTInterval currentInterval;
        try {
            currentInterval = intervalQueue.take();
            while (currentInterval.getStartTime() != -1) {
                /* Send the interval to the History Tree */
                sht.insertInterval(currentInterval);
                currentInterval = intervalQueue.take();
            }
            assert (currentInterval.getAttribute() == -1);
            /*
             * We've been told we're done, let's write down everything and quit.
             * The end time of this "signal interval" is actually correct.
             */
            sht.closeTree(currentInterval.getEndTime());
            return;
        } catch (InterruptedException e) {
            /* We've been interrupted abnormally */
            Activator.logError("State History Tree interrupted!", e); //$NON-NLS-1$
        } catch (TimeRangeException e) {
            /* This also should not happen */
            Activator.logError("Error starting the state system", e); //$NON-NLS-1$
        }
    }

