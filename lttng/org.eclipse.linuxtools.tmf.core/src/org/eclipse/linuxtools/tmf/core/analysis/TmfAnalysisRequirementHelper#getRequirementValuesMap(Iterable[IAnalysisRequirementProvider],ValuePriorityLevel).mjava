    /**
     * Gets a map in which the keys are the types of different requirements and
     * the values represents a list of requirement values linked to that type.
     * We only take values with the same priority level as the argument.
     *
     * @param providers
     *            The set of analysis requirement provider
     * @param level
     *            The priority level of the values to be returned
     * @return A map with the values keyed by type
     */
    public static SetMultimap<String, String> getRequirementValuesMap(Iterable<IAnalysisRequirementProvider> providers, ValuePriorityLevel level) {
        SetMultimap<String, String> valuesByType = HashMultimap.create();
        for (IAnalysisRequirementProvider provider : providers) {
            for (TmfAnalysisRequirement requirement : provider.getAnalysisRequirements()) {
                /* Since it's a set, there will be no duplicate */
                for (String value : requirement.getValues()) {
                    if (requirement.getValueLevel(value) == level) {
                        valuesByType.put(requirement.getType(), value);
                    }
                }
            }
        }
        return valuesByType;
    }

