    /**
     * Constructor
     *
     * @param trace
     *            The trace for which we build these statistics
     * @throws TmfTraceException
     *             If something went wrong trying to initialize the statistics
     */
    public TmfStateStatistics(ITmfTrace trace) throws TmfTraceException {
        this.trace = trace;

        String directory = TmfTraceManager.getSupplementaryFileDir(trace);
        final File htFile = new File(directory + STATS_STATE_FILENAME);
        final ITmfStateProvider htInput = new StatsStateProvider(trace);

        this.stats = TmfStateSystemFactory.newFullHistory(htFile, htInput, false);
        registerStateSystems();
    }

