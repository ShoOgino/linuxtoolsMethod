    @Override
    public void setTrace(ITmfTrace trace) throws TmfAnalysisException {
        if (trace == null) {
            throw new TmfAnalysisException(Messages.TmfAbstractAnalysisModule_NullTrace);
        }
        if (fTrace != null) {
            throw new TmfAnalysisException(NLS.bind(Messages.TmfAbstractAnalysisModule_TraceSetMoreThanOnce, getName()));
        }

        /* Check that analysis can be executed */
        if (!canExecute(trace)) {
            throw new TmfAnalysisException(NLS.bind(Messages.TmfAbstractAnalysisModule_AnalysisCannotExecute, getName()));
        }

        fTrace = trace;
        /* Get the parameter providers for this trace */
        fParameterProviders = TmfAnalysisManager.getParameterProviders(this, fTrace);
        for (IAnalysisParameterProvider provider : fParameterProviders) {
            provider.registerModule(this);
        }
        resetAnalysis();
        fStarted = false;
    }

