    public TmfExperimentContext(final ITmfTrace<?>[] traces, final ITmfContext[] contexts) {
        super();
        fTraces = traces;
        fContexts = contexts;
        fEvents = new ITmfEvent[fTraces.length];

        final ITmfLocation<?>[] locations = new ITmfLocation[fTraces.length];
        final long[] ranks = new long[fTraces.length];
        long rank = 0;
        for (int i = 0; i < fTraces.length; i++)
            if (contexts[i] != null) {
                locations[i] = contexts[i].getLocation();
                ranks[i] = contexts[i].getRank();
                rank += contexts[i].getRank();
            }

        setLocation(new TmfExperimentLocation(new TmfLocationArray(locations), ranks));
        setRank(rank);
        lastTraceRead = NO_TRACE;
    }

