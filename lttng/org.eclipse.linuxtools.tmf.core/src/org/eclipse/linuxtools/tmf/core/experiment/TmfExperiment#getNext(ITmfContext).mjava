    /* (non-Javadoc)
     * @see org.eclipse.linuxtools.tmf.core.trace.ITmfTrace#readNextEvent(org.eclipse.linuxtools.tmf.core.trace.ITmfContext)
     */
    @Override
    public synchronized T getNext(final ITmfContext context) {
        final ITmfContext previousContext = (TmfExperimentContext) context.clone();
        final T event = parseEvent(context);
        if (event != null) {
            updateAttributes(previousContext, event.getTimestamp());

            TmfExperimentContext expContext = (TmfExperimentContext) context;
            int trace = expContext.getLastTrace();
            if (trace != TmfExperimentContext.NO_TRACE) {
                TmfExperimentLocation location = (TmfExperimentLocation) expContext.getLocation();
                location.getLocation().getLocations()[trace] = expContext.getContexts()[trace].getLocation();
            }
            
            context.increaseRank();
            processEvent(event);
        }
        return event;
    }

