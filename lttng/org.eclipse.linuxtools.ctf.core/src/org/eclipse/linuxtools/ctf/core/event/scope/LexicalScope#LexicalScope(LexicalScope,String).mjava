    /**
     * The scope constructor
     *
     * @param parent
     *            The parent node, can be null, but shouldn't
     * @param name
     *            the name of the field
     */
    @SuppressWarnings("null")
    public LexicalScope(@Nullable LexicalScope parent, String name) {
        fName = name;
        if (parent != null) {
            String pathString = Joiner.on('.').skipNulls().join(parent.fPath, parent.getName());
            /*
             * if joiner return null, we get an NPE... so we won't assign fPath
             * to null
             */
            if (pathString.startsWith(".")) { //$NON-NLS-1$
                /*
                 * substring throws an exception or returns a string, it won't
                 * return null
                 */
                pathString = pathString.substring(1);
            }
            fPath = pathString;
            parent.addChild(fName, this);
        } else {
            fPath = ""; //$NON-NLS-1$
        }
        @NonNull
        Map<String, LexicalScope> children =
                Collections.synchronizedMap(new HashMap<String, LexicalScope>());
        fChildren = children;
    }

