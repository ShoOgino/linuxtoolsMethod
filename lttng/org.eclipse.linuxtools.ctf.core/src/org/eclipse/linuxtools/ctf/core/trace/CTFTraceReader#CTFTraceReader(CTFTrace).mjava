    /**
     * Constructs a TraceReader to read a trace.
     *
     * @param trace
     *            The trace to read from.
     * @throws CTFReaderException
     */
    public CTFTraceReader(CTFTrace trace) {
        this.trace = trace;

        /**
         * Create the trace file readers.
         */
        createStreamInputReaders();

        /**
         * Populate the timestamp-based priority queue.
         */
        populateStreamInputReaderHeap();

        /**
         * Get the start Time of this trace
         * bear in mind that the trace could be empty.
         */
        this.startTime = 0;// prio.peek().getPacketReader().getCurrentPacket().getTimestampBegin();
        if (hasMoreEvents()) {
            this.startTime = prio.peek().getCurrentEvent().timestamp;
            this.endTime = this.startTime;
            this.index = 0;
        }
        startIndex = new HashMap<Integer, Long>();
    }

