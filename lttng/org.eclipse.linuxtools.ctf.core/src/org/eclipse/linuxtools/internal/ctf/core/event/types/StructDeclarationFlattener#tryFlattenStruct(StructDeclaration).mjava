    /**
     * Flatten a {@link StructDeclaration}, if it can be (which means if it
     * contains only fixed-size elements).
     *
     * This does not modify the declaration passed in parameter, you need to use
     * the return value.
     *
     * @param sd
     *            The initial StructDeclaration
     * @return The flattened struct. Or if it couldn't be flattened, the 'sd'
     *         struct itself
     */
    public static StructDeclaration tryFlattenStruct(@NonNull StructDeclaration sd) {
        if (canBeFlattened(sd)) {
            return newFlattenedStruct(sd);
        }
        return sd;
    }

