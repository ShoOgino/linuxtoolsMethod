    /**
     * Test a range query with a resolution
     */
    @Test
    public void testRangeQuery2() throws AttributeNotFoundException,
            TimeRangeException, StateValueTypeException {

        long time1 = interestingTimestamp1;
        long time2 = time1 + 1L * CTFTestFiles.NANOSECS_PER_SEC;
        long resolution = 1000000; /* One query every millisecond */
        int quark;
        List<ITmfStateInterval> intervals;

        quark = shs.getQuarkAbsolute("CPUs", "0", "Current_thread");
        intervals = shs.queryHistoryRange(quark, time1, time2, resolution);
        assertEquals(129, intervals.size()); /* Number of context switches! */
        assertEquals(1452, intervals.get(50).getStateValue().unboxInt());
        assertEquals(18670837977001L, intervals.get(100).getEndTime());
    }

