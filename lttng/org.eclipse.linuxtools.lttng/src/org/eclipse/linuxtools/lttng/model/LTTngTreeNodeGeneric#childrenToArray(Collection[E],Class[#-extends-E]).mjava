	/**
	 * Convert from generic collection to generic array. An empty array is
	 * provided when no children nodes are defined
	 * 
	 * @param collection
	 * @param k
	 * @return
	 */
	@SuppressWarnings("unchecked")
	protected E[] childrenToArray(Collection<E> collection, Class<? extends E> k) {
		// check entries
		if (collection == null || k == null) {
			return null;
		}

		int size = collection.size();

		// unchecked cast
		E[] childrenArray = (E[]) java.lang.reflect.Array.newInstance(k, size);
		int i = 0;
		for (E item : collection) {
			childrenArray[i++] = item;
		}

		return childrenArray;
	}

