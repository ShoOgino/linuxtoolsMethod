	public void init(ILttngStateInputRef inputReference)
			throws LttngStateException {
		if (inputReference == null) {
			StringBuilder sb = new StringBuilder(
					"The input provider reference must not be null");
			throw new LttngStateException(sb.toString());
		}

		// Save the input data reference
		inputDataRef = inputReference;

		// Save traceid
		traceId = inputDataRef.getTraceId();

		// max time
		setMax_time_state_recomputed_in_seek(new TmfTimestamp());

		// reset cpu_states
		cpu_states.clear();
		
		// Obtain the total num of available CPUs and initialize the map
		// to the corresponding size
		int numCpus = inputDataRef.getNumberOfCpus();
		for (Long i = 0L; i < numCpus; i++) {
			cpu_states.put(i, new LTTngCPUState());
		}

		// irq states
		irq_states.clear();
		for (Long i = 0L; i < irq_names.size(); i++) {
			irq_states.put(i, new LttngIRQState());
		}

		// soft irqs
		soft_irq_states.clear();
		for (Long i = 0L; i < soft_irq_names.size(); i++) {
			soft_irq_states.put(i, new LttngSoftIRQState());
		}

		// traps
		trap_states.clear();
		for (Long i = 0L; i < trap_names.size(); i++) {
			trap_states.put(i, new LttngTrapState(0L));
		}

		// bdev states
		bdev_states.clear();

		// JniTrace State
		init_state(numCpus);

	}

