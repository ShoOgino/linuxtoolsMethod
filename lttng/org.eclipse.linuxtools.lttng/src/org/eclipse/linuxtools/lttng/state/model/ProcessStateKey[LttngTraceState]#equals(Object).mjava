    @Override
    public boolean equals(Object obj) {

    	if (obj == null) return false;
		boolean isSame = true;
		
        if ( obj instanceof ProcessStateKey ) {
        	ProcessStateKey procKey = (ProcessStateKey) obj;
        	
			if (valueRef != null) {
				if (!(procKey.getPid().equals(valueRef.getPid()))) {
					return false;
				}
				
				if (!procKey.getTraceId().equals(valueRef.getTrace_id())) {
					return false;
				}

				if (((procKey.getPid().longValue() == 0L) && !(procKey.getCpuId().equals(valueRef.getCpu())))) {
					isSame = false;
				}
			} else {
				if (!(procKey.getPid().equals(this.pid))) {
					return false;
				}

				if (!(procKey.getTraceId().equals(this.traceId))) {
					return false;
				}

				if (((procKey.getPid().longValue() == 0L) && !(procKey.getCpuId().equals(this.cpuId)))) {
					return false;
				}
			}
		}
        else {
			TraceDebug
					.debug("ERROR : The received Key is not of the type ProcessStateKey! but "
							+ obj.getClass().toString());
			return false;
        }
        
        return isSame;
    }

