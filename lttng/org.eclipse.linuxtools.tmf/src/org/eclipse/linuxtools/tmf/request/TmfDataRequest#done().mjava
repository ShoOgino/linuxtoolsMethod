    /**
     * Called by the request processor upon completion.
     */
    public void done() {
        if (Tracer.isRequestTraced()) Tracer.traceRequest(this, "completing");
        synchronized(lock) {
        	if (!fRequestCompleted) {
            	fRequestRunning   = false;
                fRequestCompleted = true;
            }
            handleCompleted();
            lock.notifyAll();
        }
    }

