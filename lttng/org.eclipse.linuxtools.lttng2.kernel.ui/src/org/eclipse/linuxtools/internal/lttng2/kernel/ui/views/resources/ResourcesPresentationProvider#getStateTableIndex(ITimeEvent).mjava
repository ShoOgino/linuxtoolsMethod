    @Override
    public int getStateTableIndex(ITimeEvent event) {
        State state = getEventState(event);
        if (state != null) {
            return state.ordinal();
        }
        if (event instanceof TimeEvent) {
            TimeEvent tcEvent = (TimeEvent) event;
            if (tcEvent.hasValue()) {
                return INVISIBLE;
            }
        }
        return TRANSPARENT;
    }

