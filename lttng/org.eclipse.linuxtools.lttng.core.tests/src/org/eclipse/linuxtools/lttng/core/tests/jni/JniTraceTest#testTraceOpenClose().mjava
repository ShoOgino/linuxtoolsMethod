    public void testTraceOpenClose() {

        JniTrace testTrace = prepareTraceToTest(); // This trace should be valid

        // test the constructor with arguments passing a wrong tracepath
        try {
            testTrace.openTrace(wrongTracePath);
            fail("Open with wrong tracepath should fail!");
        } catch (JniException e) {
        }

        // Test open with a correct tracepath
        try {
            testTrace.openTrace(tracepath1);
            assertNotSame("getTracepath is empty after open", "", testTrace.getTracepath());
        } catch (JniException e) {
            fail("Open with a correct tracepath failed!");
        }

        // Test to open a trace already opened
        try {
            testTrace.openTrace(tracepath1);
            testTrace.openTrace(tracepath2);
            assertNotSame("getTracepath is empty after open", "", testTrace.getTracepath());
        } catch (JniException e) {
            fail("Reopen of a trace failed!");
        }

        // Test to open a trace already opened, but with a wrong tracepath
        try {
            testTrace.openTrace(tracepath1);
            testTrace.openTrace(wrongTracePath);
            fail("Reopen with wrong tracepath should fail!");
        } catch (JniException e) {
        }
    }

