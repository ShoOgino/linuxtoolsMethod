    /**
     * @return
     */
    protected TmfExperiment prepareTextExperimentToTest() {
        if (fTestExperiment == null) {
            final String expId = "testExperiment";
            final int nbTraces = 1;

            // Define traces in experiment
            final ITmfTrace[] traces = new ITmfTrace[nbTraces];
            final ITmfTrace trace = prepareTextStreamToTest();
            traces[0] = trace;

            // create experiment and associate traces
            fTestExperiment = new TmfExperiment(LttngEvent.class, expId, traces);

            // Set the current selected experiment as the test experiment
            final TmfExperimentSelectedSignal signal = new TmfExperimentSelectedSignal(
                    this, fTestExperiment);
            fTestExperiment.experimentSelected(signal);

        }

        return fTestExperiment;
    }

