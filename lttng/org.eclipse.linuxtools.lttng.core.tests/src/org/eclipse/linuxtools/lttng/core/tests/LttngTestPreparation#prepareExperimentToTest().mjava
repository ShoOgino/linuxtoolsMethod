    /**
     * @return
     */
    protected TmfExperiment prepareExperimentToTest() {
        if (fTestExperiment == null) {
            final String expId = "testExperiment";
            final int nbTraces = 1;

            // Define traces in experiment
            final ITmfTrace[] traces = new ITmfTrace[nbTraces];
            final ITmfTrace trace = prepareStreamToTest();
            traces[0] = trace;

            fTestExperiment = new TmfExperiment(LttngEvent.class, expId, traces, TmfExperiment.DEFAULT_BLOCK_SIZE);

            // Set the current selected experiment as the test experiment
            final TmfExperimentSelectedSignal signal = new TmfExperimentSelectedSignal(
                    this, fTestExperiment);
            fTestExperiment.experimentSelected(signal);
        }

        return fTestExperiment;
    }

