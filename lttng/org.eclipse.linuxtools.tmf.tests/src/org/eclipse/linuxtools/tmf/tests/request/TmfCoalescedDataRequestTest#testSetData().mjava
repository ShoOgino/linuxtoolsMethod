	public void testSetData() {

		TmfCoalescedDataRequest<TmfEvent> coalescedRequest = new TmfCoalescedDataRequest<TmfEvent>(TmfEvent.class, 10, 100, 200);
		TmfDataRequest<TmfEvent> request1 = new TmfDataRequestStub<TmfEvent>(TmfEvent.class, 10, 100, 200);
		TmfDataRequest<TmfEvent> request2 = new TmfDataRequestStub<TmfEvent>(TmfEvent.class, 10, 100, 200);
		coalescedRequest.addRequest(request1);
		coalescedRequest.addRequest(request2);

		// Initialize the data
		int nbEvents = 10;
		TmfEvent[] events = new TmfEvent[nbEvents];
		for (int i = 0; i < nbEvents; i++) {
			events[i] = new TmfEvent(new TmfTimestamp(i), new TmfEventSource(),
					new TmfEventType(), new TmfEventReference());
		}

		coalescedRequest.setData(events);
		coalescedRequest.handleData();

		// Validate the coalescing request
		assertEquals("setData", nbEvents, coalescedRequest.getNbRead());
		TmfEvent[] eventsRead1 = coalescedRequest.getData();
		assertEquals("getData", nbEvents, eventsRead1.length);
		for (int i = 0; i < nbEvents; i++) {
			assertEquals("getData", i, eventsRead1[i].getTimestamp().getValue());
		}

		// Validate the first coalesced request
		assertEquals("setData", nbEvents, request1.getNbRead());
		TmfEvent[] eventsRead2 = request1.getData();
		assertEquals("getData", nbEvents, eventsRead2.length);
		for (int i = 0; i < nbEvents; i++) {
			assertEquals("getData", i, eventsRead2[i].getTimestamp().getValue());
		}

		// Validate the second coalesced request
		assertEquals("setData", nbEvents, request2.getNbRead());
		TmfEvent[] eventsRead3 = request2.getData();
		assertEquals("getData", nbEvents, eventsRead3.length);
		for (int i = 0; i < nbEvents; i++) {
			assertEquals("getData", i, eventsRead3[i].getTimestamp().getValue());
		}
	}

