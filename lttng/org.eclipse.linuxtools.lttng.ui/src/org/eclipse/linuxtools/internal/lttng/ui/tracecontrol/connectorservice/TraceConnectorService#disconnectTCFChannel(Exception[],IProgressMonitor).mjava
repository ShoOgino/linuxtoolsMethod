    /*
     * Disconnect the TCF channel.
     */
    private boolean disconnectTCFChannel(Exception[] res, IProgressMonitor monitor) {
        if (fChannel == null || fChannel.getState() == IChannel.STATE_CLOSED) {
            synchronized (res) {
                res[0] = null;
                res.notifyAll();
                return true;
            }
        }
        if (monitor.isCanceled()) {
            synchronized (res) {
                res[0] = new Exception("Canceled"); //$NON-NLS-1$
                res.notifyAll();
                return true;
            }
        }
        if (fChannel.getState() == IChannel.STATE_OPEN) {
            fChannel.close();
        }
        return false;
    }

