    /**
     * Computes the offset of the timestamp in the histogram
     * 
     * @param timestamp the timestamp
     * @return the offset of the corresponding bucket (-1 if invalid)
     */
    public synchronized int getOffset(long timestamp) {
        if (timestamp < fDataModel.getStartTime() || timestamp > fDataModel.getEndTime())
            return -1;
        return (int) ((timestamp - fDataModel.getStartTime()) / fScaledData.fBucketDuration);
    }

