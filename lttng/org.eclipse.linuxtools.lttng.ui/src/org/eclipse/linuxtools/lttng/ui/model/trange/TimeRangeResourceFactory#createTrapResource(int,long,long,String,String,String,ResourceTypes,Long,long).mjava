	private TimeRangeEventResource createTrapResource(int newId,
			long newStartTime, long newStopTime, String newName,
			String newGroupName, String newClassName, ResourceTypes newType,
			Long newResourceId, long insertionTime) {

		TimeRangeEventResource resource = new TimeRangeEventResource(newId,
				newStartTime, newStopTime, newName, newGroupName, newClassName,
				newType, newResourceId, insertionTime) {

			@Override
			public String getStateMode(LttngTraceState traceSt) {
				// Determine the trap state.
				String trapStateMode = "";
				LttngTrapState ts = traceSt.getTrap_states().get(getResourceId());
				
				// *** Note : 
				//	Ts might not have been created yet.
				//	This is because the state system will be updated next to this before hook
				//	It should be correct to create it here as Busy 
				//		(traps are created with running++ so it wont be idle)
				if ( ts != null ) {
					Long trapState = ts.getRunning();
					
					if (trapState == 0) {
						trapStateMode = StateStrings.TrapMode.LTTV_TRAP_IDLE.getInName();
					} else {
						trapStateMode = StateStrings.TrapMode.LTTV_TRAP_BUSY.getInName();
					}
				}
				else {
					trapStateMode = StateStrings.TrapMode.LTTV_TRAP_BUSY.getInName();
				}
				
				return trapStateMode;
			}
		};

		return resource;
	}

