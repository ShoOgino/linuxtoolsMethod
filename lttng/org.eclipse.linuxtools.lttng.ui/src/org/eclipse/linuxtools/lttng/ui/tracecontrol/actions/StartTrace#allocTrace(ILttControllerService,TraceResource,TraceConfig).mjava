    /*
     * Allocate trace resources on the remote system.
     */
    private void allocTrace(final ILttControllerService service, final TraceResource trace, final TraceConfig oldConfig) throws Exception {
        new TCFTask<Boolean>() {
        @Override
        public void run() {

            // Setup trace transport using Lttng controller service proxy
            service.allocTrace(trace.getParent().getParent().getName(), 
                    trace.getParent().getName(), 
                    trace.getName(),  
                    new ILttControllerService.DoneAllocTrace() {

                @Override
                public void doneAllocTrace(IToken token, Exception error, Object str) {
                    if (error != null) {
                        // Notify with error
                        error(error);
                        return;
                    }

                    // Notify about success
                    done(Boolean.valueOf(true));
                }
            });
        }}.get(TraceControlConstants.DEFAULT_TCF_TASK_TIMEOUT, TimeUnit.SECONDS);
    }

