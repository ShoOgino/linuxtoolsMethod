    public TmfEvent getNextEvent(ITmfEventStream eventStream) throws IOException {

        if (! (eventStream instanceof LTTngEventStreamStub)) {
            return null;
        }

        RandomAccessFile stream = ((LTTngEventStreamStub) eventStream).getStream();

        try {
            long ts        = stream.readLong();
            String source  = stream.readUTF();
            String type    = stream.readUTF();
            int reference  = stream.readInt();
            int typeIndex  = Integer.parseInt(type.substring(typePrefix.length()));
            String[] fields = new String[typeIndex];
            for (int i = 0; i < typeIndex; i++) {
                fields[i] = stream.readUTF();
            }
            String content = "[";
            for (int i = 0; i < typeIndex; i++) {
                content += fields[i] + ", ";
            }
            content += "]";
            
            TmfEvent event = new TmfEvent(
                    new LTTngTimestampStub(ts),
                    new TmfEventSource(source),
                    new TmfEventType(type, fFormats[typeIndex]),
                    new TmfEventContent(content, fFormats[typeIndex]),
                    new TmfEventReference(reference));
            return event;
        } catch (EOFException e) {
        }
        return null;
    }

