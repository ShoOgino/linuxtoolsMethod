    /**
     * Test unregistering
     */
    @Test
    public void testRegister_Unregister_2() {

        // Register 2 providers, same data type
        TestProvider1 testProvider1 = new TestProvider1(ITmfEvent.class);
        TestProvider2 testProvider2 = new TestProvider2(ITmfEvent.class);

        TmfDataProvider[] providers = TmfProviderManager.getProviders(ITmfEvent.class);
        assertEquals("getProviders", 2, providers.length);
        assertTrue(providers.length == 2);
        if (providers[0] == testProvider1) {
            assertEquals("getProviders", testProvider2, providers[1]);
        }
        else {
            assertEquals("getProviders", testProvider2, providers[0]);
            assertEquals("getProviders", testProvider1, providers[1]);
        }

        providers = TmfProviderManager.getProviders(ITmfEvent.class, TestProvider1.class);
        assertEquals("getProviders", 1, providers.length);
        assertEquals("getProviders", testProvider1, providers[0]);

        providers = TmfProviderManager.getProviders(ITmfEvent.class, TestProvider2.class);
        assertEquals("getProviders", 1, providers.length);
        assertEquals("getProviders", testProvider2, providers[0]);

        // Remove one
        testProvider1.dispose();

        providers = TmfProviderManager.getProviders(ITmfEvent.class);
        assertEquals("getProviders", 1, providers.length);
        assertEquals("getProviders", testProvider2, providers[0]);

        providers = TmfProviderManager.getProviders(ITmfEvent.class, TestProvider1.class);
        assertEquals("getProviders", 0, providers.length);

        providers = TmfProviderManager.getProviders(ITmfEvent.class, TestProvider2.class);
        assertEquals("getProviders", 1, providers.length);
        assertEquals("getProviders", testProvider2, providers[0]);

        // Remove the other
        testProvider2.dispose();

        providers = TmfProviderManager.getProviders(ITmfEvent.class);
        assertEquals("getProviders", 0, providers.length);

        providers = TmfProviderManager.getProviders(ITmfEvent.class, TestProvider1.class);
        assertEquals("getProviders", 0, providers.length);

        providers = TmfProviderManager.getProviders(ITmfEvent.class, TestProvider2.class);
        assertEquals("getProviders", 0, providers.length);
    }

