    public void testIterateOverNbEventsByRank() {
        final Vector<ITmfEvent> requestedEvents = new Vector<ITmfEvent>();
        final int startEventRank = 100;
        final int nbRequestedEvents = 100;

        final ITmfEventProvider[] providers = TmfProviderManager.getProviders(TmfEvent.class, TmfTraceStub.class);
        final ITmfTrace trace = (ITmfTrace) providers[0];
        final Iterator<ITmfEvent> it = trace.iterator(startEventRank);
        int nbEventsToRead = nbRequestedEvents;
        while (it.hasNext() && nbEventsToRead-- > 0) {
            requestedEvents.add(it.next());
        }

        // Validate results
        assertEquals("nbEvents", nbRequestedEvents, requestedEvents.size());
        for (int i = 0; i < nbRequestedEvents; i++) {
            assertEquals("Distinct events", startEventRank + i + 1, requestedEvents.get(i).getTimestamp().getValue());
        }
    }

