    @Test
    public void testNotifyParent() {
        final Boolean[] notifications = new Boolean[2];
        notifications[0] = notifications[1] = false;

        final TmfRequestStub request1 = new TmfRequestStub();
        final TmfRequestStub request2 = new TmfRequestStub();
        TmfCoalescedRequest request = new TmfCoalescedRequest(request1) {
            @Override
            public void notifyParent(ITmfRequest child) {
                notifications[child == request1 ? 0 : 1] = true;
                super.notifyParent(this);
            }
        };
        request.addRequest(request2);
        assertFalse("notifyParent", notifications[0]);
        assertFalse("notifyParent", notifications[1]);

        request1.notifyParent(null);
        assertTrue("notifyParent", notifications[0]);
        assertFalse("notifyParent", notifications[1]);

        request2.notifyParent(null);
        assertTrue("notifyParent", notifications[0]);
        assertTrue("notifyParent", notifications[1]);
    }

