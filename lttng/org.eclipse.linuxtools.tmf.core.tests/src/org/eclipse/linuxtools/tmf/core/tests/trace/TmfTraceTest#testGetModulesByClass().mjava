    @Test
    public void testGetModulesByClass() {
        /* There should not be any modules at this point */
        Map<String, IAnalysisModule> modules = fTrace.getAnalysisModules();
        assertTrue(modules.isEmpty());

        /* Open the trace, the modules should be populated */
        fTrace.traceOpened(new TmfTraceOpenedSignal(this, fTrace, null));

        modules = fTrace.getAnalysisModules();
        Map<String, TestAnalysis> testModules = fTrace.getAnalysisModules(TestAnalysis.class);
        assertFalse(modules.isEmpty());
        assertFalse(testModules.isEmpty());

        /* Make sure all modules of type TestAnalysis are returned in the second call */
        for (Entry<String, IAnalysisModule> module : modules.entrySet()) {
            if (module.getValue() instanceof TestAnalysis) {
                assertTrue(testModules.containsKey(module.getKey()));
            }
        }

    }

