    /**
     * Test using multiple throttlers in parrallel. Only one signal per
     * throttler should go through.
     */
    @Test
    public void testMultipleChannels() {
        List<MySignal> signals = new ArrayList<>();
        signals.add(new MySignal(sender, 0));
        signals.add(new MySignal(sender, 0));
        signals.add(new MySignal(sender, 0));

        signals.add(new MySignal(sender, 1));
        signals.add(new MySignal(sender, 1));
        signals.add(new MySignal(sender, 1));

        signals.add(new MySignal(sender, 2));
        signals.add(new MySignal(sender, 2));
        signals.add(new MySignal(sender, 2));

        Collections.shuffle(signals); /* Every day */

        synchronized(this) {
            for (MySignal sig : signals) {
                sender.sendSignal(sig);
            }
        }

        sleep(2000);

        for (int nb : listener.nbReceived) {
            assertEquals(1, nb);
        }
    }

