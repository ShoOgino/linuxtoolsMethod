    /**
     * Test suite to test refresh of analysis module when adding a {@link IAnalysisModuleSource}
     */
    @Test
    public void testSources() {
        /* Make sure that modules in the new source are not in the list already */
        /* Generic TmfTrace */
        ITmfTrace trace = TmfTestTrace.A_TEST_10K.getTrace();
        Map<String, IAnalysisModuleHelper> map = TmfAnalysisManager.getAnalysisModules(trace.getClass());

        assertFalse(map.containsKey(AnalysisModuleTestHelper.moduleStubEnum.TEST.name()));

        /* TmfTraceStub2 class */
        map = TmfAnalysisManager.getAnalysisModules(fTrace.getClass());

        assertFalse(map.containsKey(AnalysisModuleTestHelper.moduleStubEnum.TEST2.name()));

        /* Add new source */
        TmfAnalysisManager.registerModuleSource(new AnalysisModuleSourceStub());

        /* Now make sure the modules are present */
        map = TmfAnalysisManager.getAnalysisModules(trace.getClass());
        assertTrue(map.containsKey(AnalysisModuleTestHelper.moduleStubEnum.TEST.name()));

        map = TmfAnalysisManager.getAnalysisModules(fTrace.getClass());
        assertTrue(map.containsKey(AnalysisModuleTestHelper.moduleStubEnum.TEST2.name()));
    }

