    /**
     * Test suite to test refresh of analysis module when adding a {@link IAnalysisModuleSource}
     */
    @Test
    public void testSources() {
        /* Make sure that modules in the new source are not in the list already */
        /* Generic TmfTrace */
        ITmfTrace trace = TmfTestTrace.A_TEST_10K.getTrace();
        Map<String, IAnalysisModuleHelper> map = TmfAnalysisManager.getAnalysisModules(trace.getClass());

        assertFalse(map.containsKey(AnalysisModuleTestHelper.moduleStubEnum.TEST.name()));

        /* Ctf trace */
        assumeTrue(CtfTmfTestTrace.KERNEL.exists());
        CtfTmfTrace ctftrace = CtfTmfTestTrace.KERNEL.getTrace();

        map = TmfAnalysisManager.getAnalysisModules(ctftrace.getClass());

        assertFalse(map.containsKey(AnalysisModuleTestHelper.moduleStubEnum.TESTCTF.name()));

        /* Add new source */
        TmfAnalysisManager.registerModuleSource(new AnalysisModuleSourceStub());

        /* Now make sure the modules are present */
        map = TmfAnalysisManager.getAnalysisModules(trace.getClass());
        assertTrue(map.containsKey(AnalysisModuleTestHelper.moduleStubEnum.TEST.name()));

        map = TmfAnalysisManager.getAnalysisModules(ctftrace.getClass());
        assertTrue(map.containsKey(AnalysisModuleTestHelper.moduleStubEnum.TESTCTF.name()));
    }

