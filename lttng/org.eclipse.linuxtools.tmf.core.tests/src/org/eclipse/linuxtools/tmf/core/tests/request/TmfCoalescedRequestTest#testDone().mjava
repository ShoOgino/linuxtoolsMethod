    @Test
    public void testDone() {
        final boolean[] flags = new boolean[4];
        ITmfRequest request = setupDummyRequest(flags);
        request.done();

        assertFalse("isRunning",   request.isRunning());
        assertTrue("isCompleted",  request.isCompleted());
        assertEquals("getState",   COMPLETED, request.getState());
        assertEquals("getStatus",  IStatus.OK, request.getStatus().getSeverity());
        assertTrue("isOK",         request.isOK());
        assertFalse("isFailed",    request.isFailed());
        assertFalse("isCancelled", request.isCancelled());

        assertFalse("isRunning",   fRequest1.isRunning());
        assertTrue("isCompleted",  fRequest1.isCompleted());
        assertEquals("getState",   COMPLETED, fRequest1.getState());
        assertEquals("getStatus",  IStatus.OK, fRequest1.getStatus().getSeverity());
        assertTrue("isOK",         fRequest1.isOK());
        assertFalse("isFailed",    fRequest1.isFailed());
        assertFalse("isCancelled", fRequest1.isCancelled());

        assertFalse("isRunning",   fRequest2.isRunning());
        assertTrue("isCompleted",  fRequest2.isCompleted());
        assertEquals("getState",   COMPLETED, fRequest2.getState());
        assertEquals("getStatus",  IStatus.OK, fRequest2.getStatus().getSeverity());
        assertTrue("isOK",         fRequest2.isOK());
        assertFalse("isFailed",    fRequest2.isFailed());
        assertFalse("isCancelled", fRequest2.isCancelled());

        assertTrue("handleCompleted", flags[0]);
        assertTrue("handleSuccess",   flags[1]);
        assertFalse("handleFailure",  flags[2]);
        assertFalse("handleCancel",   flags[3]);
    }

