    protected void updateIndex(TmfContext context, long rank, TmfTimestamp timestamp) {

        if (getStartTime().compareTo(timestamp, false) > 0)
            setStartTime(timestamp);
        if (getEndTime().compareTo(timestamp, false) < 0)
            setEndTime(timestamp);
        if (rank != ITmfContext.UNKNOWN_RANK) {
            if (fNbEvents <= rank)
                fNbEvents = rank + 1;
            // Build the index as we go along
            if ((rank % fIndexPageSize) == 0) {
                // Determine the table position
                long position = rank / fIndexPageSize;
                // Add new entry at proper location (if empty)
                if (fCheckpoints.size() == position) {
                    addCheckPoint(context, timestamp);
                }
            }
        }
    }

