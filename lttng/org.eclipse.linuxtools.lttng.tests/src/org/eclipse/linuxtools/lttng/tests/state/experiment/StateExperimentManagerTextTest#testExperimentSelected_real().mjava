	/**
	 * Test method for
	 * {@link org.eclipse.linuxtools.lttng.state.experiment.StateExperimentManager#experimentSelected_prep(org.eclipse.linuxtools.tmf.experiment.TmfExperiment)}
	 * .
	 */
	public void testExperimentSelected_real() {
		// Create a new Experiment manager context
		IStateExperimentManager expManager = prepareExperimentContext(true);
		expManager.waitForCompletion(true);

		// make sure a TmfExperiment instance is registered as provider and
		// selected as current
		TmfExperiment<LttngEvent> experiment = prepareExperimentToTest();

		// preparation
		expManager.experimentSelected_prep(experiment);
		// Action trigger
		expManager.experimentSelected(this, experiment);

		// Access context tree for Validation
		// access to the context tree
		LTTngTreeNode experimentNode = expManager.getSelectedExperiment();
		StateTraceManager traceManager = (StateTraceManager) experimentNode
				.getChildById(1L | LttngConstants.STATS_TRACE_NAME_ID);

		// validate
		int numProcesses = traceManager.getCheckPointStateModel().getProcesses().length;
		assertEquals("Total number of processes created", 276, numProcesses);

	}

