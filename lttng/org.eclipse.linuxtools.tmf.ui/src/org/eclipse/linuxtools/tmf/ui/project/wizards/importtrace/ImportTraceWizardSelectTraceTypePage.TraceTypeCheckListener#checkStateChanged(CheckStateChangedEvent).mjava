        @Override
        public void checkStateChanged(CheckStateChangedEvent event) {

            boolean checkStatus = event.getChecked();
            Object element = event.getElement();

            fTreeView.setGrayed(element, false);
            fTreeView.setSubtreeChecked(element, checkStatus);
            ITreeContentProvider tcp = (ITreeContentProvider) fTreeView.getContentProvider();
            String parentElement = (String) tcp.getParent(element);
            if (parentElement != null) {
                TraceTypeHelper[] siblings = (TraceTypeHelper[]) tcp.getChildren(parentElement);
                final TraceTypeHelper first = siblings[0];
                final boolean isFirstChecked = fTreeView.getChecked(first);
                boolean allSame = true;
                for (TraceTypeHelper peer : siblings) {
                    final boolean peerChecked = fTreeView.getChecked(peer);
                    if (peerChecked != isFirstChecked) {
                        allSame = false;
                    }
                }
                if (allSame) {
                    fTreeView.setGrayed(parentElement, false);
                    fTreeView.setChecked(parentElement, checkStatus);
                } else {
                    fTreeView.setChecked(parentElement, false);
                    fTreeView.setGrayed(parentElement, true);
                }
            }
            getWizard().getContainer().updateButtons();

        }

