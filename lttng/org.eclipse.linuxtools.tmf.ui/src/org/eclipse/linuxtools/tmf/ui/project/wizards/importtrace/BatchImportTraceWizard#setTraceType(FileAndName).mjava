    private IStatus setTraceType(FileAndName traceToImport) {
        IStatus validate = Status.OK_STATUS;
        IPath path = fTargetFolder.getFullPath().append(traceToImport.getName());
        IResource resource = ResourcesPlugin.getWorkspace().getRoot().findMember(path);
        if (resource != null) {
            try {
                // Set the trace type for this resource
                String traceTypeId = traceToImport.getTraceTypeId();
                TraceTypeHelper traceType = TmfTraceType.getInstance().getTraceType(traceTypeId);
                if (traceType != null) {
                    TmfTraceTypeUIUtils.setTraceType(path, traceType);
                }

                TmfProjectElement tmfProject =
                        TmfProjectRegistry.getProject(resource.getProject());
                if (tmfProject != null) {
                    final TmfTraceFolder tracesFolder = tmfProject.getTracesFolder();

                    List<TmfTraceElement> traces = tracesFolder.getTraces();
                    boolean found = false;
                    for (TmfTraceElement traceElement : traces) {
                        if (traceElement.getName().equals(resource.getName())) {
                            traceElement.refreshTraceType();
                            found = true;
                            break;
                        }
                    }
                    if (!found) {
                        TmfTraceElement te = new TmfTraceElement(traceToImport.getName(), resource, tracesFolder);
                        te.refreshTraceType();
                        traces = tracesFolder.getTraces();
                        for (TmfTraceElement traceElement : traces) {
                            if (traceElement.getName().equals(resource.getName())) {
                                traceElement.refreshTraceType();
                                ITmfTrace tmfTrace = null;
                                try {
                                    tmfTrace = traceElement.instantiateTrace();
                                    if (tmfTrace != null) {
                                        validate = tmfTrace.validate(tmfProject.getResource(), traceElement.getLocation().getPath());
                                    } else {
                                        return new Status(IStatus.ERROR, traceElement.getName(), "File does not exist : " + traceElement.getLocation().getPath()); //$NON-NLS-1$
                                    }
                                } finally {
                                    if (tmfTrace != null) {
                                        tmfTrace.dispose();
                                    }
                                }
                                break;
                            }
                        }

                    }

                }
            } catch (CoreException e) {
                Activator.getDefault().logError(Messages.BatchImportTraceWizardErrorImportingTraceResource
                        + ' ' + resource.getName(), e);
            }
        }
        return validate;
    }

