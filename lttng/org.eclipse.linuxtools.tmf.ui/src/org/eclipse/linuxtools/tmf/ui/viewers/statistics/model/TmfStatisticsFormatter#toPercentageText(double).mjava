    /**
     * Format the percentage according to user settings.
     *
     * @param percentage
     *            the percentage to format
     * @return The formated percentage as a string.
     */
    public static String toPercentageText(double percentage) {

        // The cast to long is needed because the formatter cannot truncate the number.
        double truncPercentage = ((long) (1000.0 * percentage)) / 10.0;

        String percentageString = String.format("%s%s%s", "  ", FORMATTER.format(truncPercentage), " %     "); //$NON-NLS-1$ //$NON-NLS-2$ //$NON-NLS-3$
        return percentageString;
    }

