    private void setSelectedTimeInt(long time, boolean ensureVisible, boolean doNotify) {
        long time0 = _time0;
        long time1 = _time1;
        if (ensureVisible) {
            long timeSpace = (long) ((_time1 - _time0) * .02);
            long timeMid = (long) ((_time1 - _time0) * .5);
            if (time < _time0 + timeSpace) {
                long dt = _time0 - time + timeMid;
                _time0 -= dt;
                _time1 -= dt;
            } else if (time > _time1 - timeSpace) {
                long dt = time - _time1 + timeMid;
                _time0 += dt;
                _time1 += dt;
            }
            if (_time0 < _time0_) {
                _time1 = Math.min(_time1_, _time1 + (_time0_ - _time0));
                _time0 = _time0_;
            } else if (_time1 > _time1_) {
                _time0 = Math.max(_time0_, _time0 - (_time1 - _time1_));
                _time1 = _time1_;
            }
        }
        if (_time1 - _time0 < _minTimeInterval) {
            _time1 = Math.min(_time1_, _time0 + _minTimeInterval);
        }
        _stateCtrl.adjustScrolls();
        _stateCtrl.redraw();
        _timeScaleCtrl.redraw();


        boolean notifySelectedTime = (time != _selectedTime);
        _selectedTime = time;

        if (doNotify && ((time0 != _time0) || (time1 != _time1))) {
            notifyRangeListeners(_time0, _time1);
        }

        if (doNotify && notifySelectedTime) {
            notifyTimeListeners(_selectedTime);
        }
    }

