    @Override
    protected ITmfTreeViewerEntry updateElements(long start, long end, boolean selection) {

        if (selection) {
            fSelection = start;
        } else {
            fSelection = TmfTraceManager.getInstance().getSelectionBeginTime().normalize(0, ITmfTimestamp.NANOSECOND_SCALE).getValue();
        }

        if (getTrace() == null) {
            return null;
        }

        ITmfTreeViewerEntry root = getInput();

        if (root == null) {
            root = createRoot();
        } else if (fFilterStatus) {
            clearStateSystemEntries(root);
        }

        /*
         * Update the values of the elements of the state systems at the
         * selection start time
         */
        boolean changed = updateStateSystemEntries(root, fSelection);

        return selection || changed ? root : null;
    }

