    private void setNewRange(long startTime, long duration) {
        if (startTime < fTraceStartTime) {
            startTime = fTraceStartTime;
        }

        long endTime = startTime + duration;
        if (endTime > fTraceEndTime) {
            endTime = fTraceEndTime;
            if ((endTime - duration) > fTraceStartTime) {
                startTime = endTime - duration;
            } else {
                startTime = fTraceStartTime;
            }
        }
        updateTimeRange(startTime, endTime);
    }

