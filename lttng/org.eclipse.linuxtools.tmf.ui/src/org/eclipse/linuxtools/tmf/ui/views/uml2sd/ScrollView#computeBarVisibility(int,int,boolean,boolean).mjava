    /**
     * Compute visibility of vertical/horizontal bar using given width/height and current visibility (i.e. is bar size are already in
     * for_xxx)
     * @param for_width width of foreground
     * @param for_height height of foreground
     * @param curr_h_vis The current visibility state of horizontal scroll bar
     * @param curr_v_vis The current visibility state of vertical scroll bar
     * @return <code>true</code> if visibility changed else <code>false</code> 
     */
    public int computeBarVisibility(int for_width, int for_height, boolean curr_h_vis, boolean curr_v_vis) {
        int vis = 0x00;
        switch (v_scrollbar_mode_) {
        case ALWAYS_OFF:
            break;
        case ALWAYS_ON:
            vis |= VBAR;
            break;
        case AUTO:
            if (getContentsHeight() > for_height) {
                vis = VBAR;
                // v bar size is already in for_width.
                if (!curr_v_vis) {// (curr_vis&0x01)==0)
                    for_width -= getVerticalBarWidth();
                }
            }
            break;
        }

        switch (h_scrollbar_mode_) {
        case ALWAYS_OFF:
            break;
        case ALWAYS_ON:
            vis |= HBAR;
            break;
        case AUTO:
            if (getContentsWidth() > for_width) {
                vis |= HBAR;
                // h bar is not in for_height
                if (!curr_h_vis)// (curr_vis&0x02)==0 )
                {
                    if (getContentsHeight() > for_height - getHorizontalBarHeight()) {
                        vis |= VBAR;
                    }
                }
            }
            break;
        }
        return vis;
    }

