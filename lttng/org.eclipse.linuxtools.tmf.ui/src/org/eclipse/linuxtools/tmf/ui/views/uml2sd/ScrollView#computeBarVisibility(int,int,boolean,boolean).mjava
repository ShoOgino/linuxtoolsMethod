    /**
     * Compute visibility of vertical/horizontal bar using given width/height and current visibility (i.e. is bar size are already in
     * for_xxx)
     * @param forWidth width of foreground
     * @param forHeight height of foreground
     * @param currHorVis The current visibility state of horizontal scroll bar
     * @param currVertvis The current visibility state of vertical scroll bar
     * @return <code>true</code> if visibility changed else <code>false</code>
     */
    public int computeBarVisibility(int forWidth, int forHeight, boolean currHorVis, boolean currVertvis) {

        int localForWidth = forWidth;
        int vis = 0x00;
        switch (fVertScrollbarMode) {
        case ALWAYS_OFF:
            break;
        case ALWAYS_ON:
            vis |= VBAR;
            break;
        case AUTO:
            if (getContentsHeight() > forHeight) {
                vis = VBAR;
                // v bar size is already in for_width.
                if (!currVertvis) {// (curr_vis&0x01)==0)
                    localForWidth -= getVerticalBarWidth();
                }
            }
            break;
        default:
            break;
        }

        switch (fHorScrollbarMode) {
        case ALWAYS_OFF:
            break;
        case ALWAYS_ON:
            vis |= HBAR;
            break;
        case AUTO:
            if (getContentsWidth() > localForWidth) {
                vis |= HBAR;
                // h bar is not in for_height
                if ((!currHorVis) && (getContentsHeight() > (forHeight - getHorizontalBarHeight()))) {// (curr_vis&0x02)==0 )
                    vis |= VBAR;
                }
            }
            break;
        default:
            break;
        }
        return vis;
    }

