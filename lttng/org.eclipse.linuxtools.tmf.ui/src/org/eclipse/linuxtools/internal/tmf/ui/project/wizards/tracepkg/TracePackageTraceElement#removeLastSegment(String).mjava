    /**
     * We do this outside of the Path class because we don't want it to convert
     * \ to / on Windows in the presence of regular expressions
     */
    private static String removeLastSegment(String str) {
        String ret = removeAllTrailing(str, IPath.SEPARATOR);
        int lastIndexOf = ret.lastIndexOf(IPath.SEPARATOR);
        if (lastIndexOf != -1) {
            ret = ret.substring(0, lastIndexOf);
            ret = removeAllTrailing(ret, IPath.SEPARATOR);
        } else {
            ret = ""; //$NON-NLS-1$
        }

        return ret;
    }

