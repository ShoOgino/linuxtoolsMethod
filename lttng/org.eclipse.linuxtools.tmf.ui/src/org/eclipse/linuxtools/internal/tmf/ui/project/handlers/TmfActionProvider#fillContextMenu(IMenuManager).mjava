    @Override
    public void fillContextMenu(IMenuManager menu) {
        ISelection selection = getContext().getSelection();
        if (selection instanceof IStructuredSelection) {
            IStructuredSelection structuredSelection = (IStructuredSelection) selection;
            if (structuredSelection.size() == 1 && structuredSelection.getFirstElement() instanceof TmfTraceElement) {
                TmfTraceElement traceElement = (TmfTraceElement) structuredSelection.getFirstElement();
                if (traceElement.getResource() instanceof IFile) {
                    MenuManager openWithMenu = new MenuManager(Messages.TmfActionProvider_OpenWith);
                    openWithMenu.add(new OpenWithMenu(page, traceElement.getResource()));
                    menu.insertAfter(ICommonMenuConstants.GROUP_OPEN_WITH, openWithMenu);
                }
            }
        }
    }

