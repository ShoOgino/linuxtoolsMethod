    @Override
    protected void readData(final ISeries series, final long start, final long end, final int nb) {
        if (getTrace() != null) {
            final double y[] = new double[nb];

            Thread thread = new Thread("Histogram viewer update") { //$NON-NLS-1$
                @Override
                public void run() {
                    double x[] = getXAxis(start, end, nb);
                    final long yLong[] = new long[nb];
                    Arrays.fill(y, 0.0);

                    /* Add the values for each trace */
                    for (ITmfTrace trace : TmfTraceManager.getTraceSet(getTrace())) {
                        /* Retrieve the statistics object */
                        final TmfStatisticsModule statsMod =
                               trace.getAnalysisModuleOfClass(TmfStatisticsModule.class, TmfStatisticsModule.ID);
                        if (statsMod == null) {
                            /* No statistics module available for this trace */
                            continue;
                        }
                        statsMod.waitForInitialization();
                        final ITmfStatistics stats = statsMod.getStatistics();
                        if (stats == null) {
                            /*
                             * Should not be null after waitForInitialization()
                             * is called.
                             */
                            throw new IllegalStateException();
                        }
                        List<Long> values = stats.histogramQuery(start, end, nb);

                        for (int i = 0; i < nb; i++) {
                            yLong[i] += values.get(i);
                        }
                    }

                    for (int i = 0; i < nb; i++) {
                        y[i] += yLong[i]; /* casting from long to double */
                    }

                    /* Update the viewer */
                    drawChart(series, x, y);
                }
            };
            thread.start();
        }
        return;
    }

