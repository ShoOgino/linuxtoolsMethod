    /**
     * Test an compact large header
     *
     * @throws CTFReaderException
     *             if {@link BitBuffer} is null
     */
    @Test
    public void testLargeCompact() throws CTFReaderException {
        ByteBuffer buffer = ByteBuffer.allocate(16);
        buffer.putShort((short) ID);
        buffer.putInt(TIMESTAMP);
        byte[] validLarge1 = buffer.array();

        EventHeaderLargeDeclaration decl = new EventHeaderLargeDeclaration(ByteOrder.BIG_ENDIAN);
        final ByteBuffer input = ByteBuffer.wrap(validLarge1);
        assertNotNull(input);
        EventHeaderDefinition def = decl.createDefinition(null, "bla", new BitBuffer(input));
        assertNotNull(def);
        assertEquals(ID, def.getId());
        assertEquals(TIMESTAMP, def.getTimestamp());
        assertEquals(ID, ((IntegerDefinition) def.getDefinition("id")).getValue());
        assertEquals(TIMESTAMP, ((IntegerDefinition) def.getDefinition("timestamp")).getValue());
    }

