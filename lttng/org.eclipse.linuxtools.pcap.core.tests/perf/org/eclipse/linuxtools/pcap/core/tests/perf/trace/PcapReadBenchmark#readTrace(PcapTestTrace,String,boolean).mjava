    private static void readTrace(PcapTestTrace testTrace, String testName, boolean inGlobalSummary) {
        assumeTrue(testTrace.exists());

        Performance perf = Performance.getDefault();
        PerformanceMeter pm = perf.createPerformanceMeter(TEST_ID + '#' + testName);
        perf.tagAsSummary(pm, TEST_SUITE_NAME + ':' + testName, Dimension.CPU_TIME);

        if (inGlobalSummary) {
            perf.tagAsGlobalSummary(pm, TEST_SUITE_NAME + ':' + testName, Dimension.CPU_TIME);
        }

        for (int loop = 0; loop < LOOP_COUNT; loop++) {
            pm.start();
            try (PcapFile trace = testTrace.getTrace();) {
                for (int i = 0; i < RUN_BETWEEN_COMMIT_COUNT; i++) {
                    trace.seekPacket(0);
                    while (trace.hasNextPacket()) {
                        Packet packet = trace.parseNextPacket();
                        if (packet == null) {
                            fail("Test failed at iteration " + loop + '.' + i + ", at packet " + trace.getCurrentRank());
                            return;
                        }
                        /* Do something with the packet because we are awesome */
                        packet.getPayload();
                    }
                }
            } catch (IOException | BadPcapFileException | BadPacketException e) {
                fail("Test failed at iteration " + loop + ':' + e.getMessage());
            }
            pm.stop();
        }
        pm.commit();
    }

