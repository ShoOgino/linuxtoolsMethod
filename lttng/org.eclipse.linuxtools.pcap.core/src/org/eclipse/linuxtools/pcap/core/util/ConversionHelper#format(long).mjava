    /**
     * Format the timestamp to a string.
     *
     * @param value
     *            the timestamp value to format (in ns)
     * @return the formatted timestamp
     */
    private static String format(long value) {
        // Split the timestamp value into its sub-components
        long date = value / 1000000; // milliseconds since epoch
        long cs = Math.abs((value % 1000000) / 1000); // microseconds
        long ns = Math.abs(value % 1000); // nanoseconds

        Date dateObject = new Date(date);

        StringBuilder sb = new StringBuilder(DATE_FORMATTER.format(dateObject));
        sb.append('.')
                .append(String.format("%03d", cs)) //$NON-NLS-1$
                .append('.')
                .append(String.format("%03d", ns)); //$NON-NLS-1$

        String string = sb.toString();
        if (string == null) {
            return EMPTY_STRING;
        }
        return string;

    }

