	@Test
	public void shouldRetrieveImageHierarchy() {
		// given
		final Image rootImage = MockImageFactory.id("sha256:root").name("root").build();
		final Image fooImage = MockImageFactory.id("sha256:foo").name("foo").parentId("sha256:root").build();
		final Image barImage = MockImageFactory.id("sha256:bar").name("bar").parentId("sha256:foo").build();
		final DockerClient client = MockDockerClientFactory
				.image(rootImage).image(fooImage).image(barImage).build();
		final DockerConnection connection = MockDockerConnectionFactory.from("Test", client).withDefaultTCPConnectionSettings();
		connection.getImages(true);
		final IDockerImage image = connection.getImages().stream().filter(i -> i.id().equals("sha256:foo")).findFirst().get();
		// when
		final IDockerImageHiearchyNode imageHierarchy = connection.resolveImageHierarchy(image);
		// then
		assertThat(imageHierarchy).isNotNull();
		assertThat(imageHierarchy.getImage().id()).isEqualTo("sha256:foo");
		assertThat(imageHierarchy.getParent().getImage().id()).isEqualTo("sha256:root");
		assertThat(imageHierarchy.getParent().getChildren()).containsExactly(imageHierarchy);
	}

