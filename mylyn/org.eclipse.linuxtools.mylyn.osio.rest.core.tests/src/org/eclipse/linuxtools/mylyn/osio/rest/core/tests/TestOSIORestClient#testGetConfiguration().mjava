	@Test
	public void testGetConfiguration() throws Exception {
		initSpaces();
		requestProvider.addGetRequest("/namedspaces/user", spaces);
		OSIORestClient client = connector.getClient(repository, requestProvider);
		RepositoryLocation location = client.getClient().getLocation();
		location.setProperty(IOSIORestConstants.REPOSITORY_AUTH_ID, "user");
		location.setProperty(IOSIORestConstants.REPOSITORY_AUTH_TOKEN, "xxxxxxTokenxxxxxx");
		OSIORestConfiguration configuration = client.getConfiguration(repository, new NullOperationMonitor());
		Map<String, Space> spaces = configuration.getSpaces();
		assertEquals(spaces.size(), 2);
		assertTrue(spaces.containsKey("mywork"));
		assertTrue(spaces.containsKey("mywork2"));
	}

