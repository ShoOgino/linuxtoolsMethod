    private void initColors() {
        for (int i = 0; i < GREENCOLORS.length; i++) {
            GREENCOLORS[i] = null;
        }

        Display d = PlatformUI.getWorkbench().getDisplay();
        /* Recover the preferences database. */
        IPreferenceStore prefs_store = Activator.getDefault().getPreferenceStore();

        COLORIZE_CODE = prefs_store.getBoolean(ColorPreferencePage.PREFKEY_COV_USE_COLORS);
        USE_GRADIENT = prefs_store.getBoolean(ColorPreferencePage.PREFKEY_COV_USE_GRADIENT);

        /* Recover and build the colors from the preferences database. */
        GREEN_MAX = new Color(d,
                StringConverter.asRGB(prefs_store.getString(ColorPreferencePage.PREFKEY_COV_MAX_COLOR)));
        GREEN_MIN = new Color(d,
                StringConverter.asRGB(prefs_store.getString(ColorPreferencePage.PREFKEY_COV_MIN_COLOR)));
        RED = new Color(d, StringConverter.asRGB(prefs_store.getString(ColorPreferencePage.PREFKEY_COV_0_COLOR)));

        /* Colors are now allocated. */
        initialized = true;
    }

