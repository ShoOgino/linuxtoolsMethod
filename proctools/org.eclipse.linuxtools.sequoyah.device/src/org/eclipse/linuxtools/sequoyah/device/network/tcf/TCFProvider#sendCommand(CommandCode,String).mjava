	/**
	 * This method will be executed in a separated thread and will produce
	 * an event to be sent to the registered listeners. 
	 */
	public void sendCommand(CommandCode cmd, String cmdStr) throws IOException {

		if (CommandCode.FETCH_FILE != cmd) {
			return;
		}

		final TCFWrapper connectionWrapperAux = connectionWrapper;
	
		final String path = cmdStr.substring(0, cmdStr.lastIndexOf("/"));
		final String fileName = cmdStr.substring(cmdStr.lastIndexOf("/"));

		sendCommandThread = new Thread() {
			public void run() {
				try {
					
					if (null != connectionWrapperAux.fetchFile(path, fileName)) {
						StringBuffer result = connectionWrapperAux.getLastResponde();
						TCFProvider.this.notifyListeners(
								EventCode.EVT_PROVIDER_SENDCOMMAND_FINISHED, result);
					} else {
						logger.info("##### NULL ######");
					}
				} catch (IOException ie) {
					TCFProvider.this.notifyListeners(
							EventCode.EVT_PROVIDER_SENDCOMMAND_ERROR, null);					
				}
				
			}
		};
		sendCommandThread.start();
	}

