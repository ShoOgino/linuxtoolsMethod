	//need to have this here because a saved launch config will have the manual
	// attribute left over, and a previous manual run will still run manually
	// even if launched from the non-manual shortcut
	@Override
	protected ILaunchConfiguration findLaunchConfiguration(IBinary bin, String mode) {
		ILaunchConfiguration config = super.findLaunchConfiguration(bin, mode);
		
		try {
			ILaunchConfigurationWorkingCopy wc = config.getWorkingCopy();
			IResource binary = bin.getResource(); 
			wc.setAttribute(OprofileLaunchPlugin.ATTR_MANUAL_PROFILE, false);
			// A project at /some/arbitrary/path/projectName/Debug/binaryName will
			// produce a workDir of /some/arbitrary/path
			int pathSegments = 1;
			String binaryRelPath = wc.getAttribute(ICDTLaunchConfigurationConstants.ATTR_PROGRAM_NAME, ""); //$NON-NLS-1$
			for (char c : binaryRelPath.toCharArray()){
				if (c == Path.SEPARATOR){
					pathSegments++;
				}
			}
			String workDir = binary.getLocation().removeLastSegments(pathSegments).toOSString();
			wc.setAttribute(ICDTLaunchConfigurationConstants.ATTR_WORKING_DIRECTORY, workDir);
			wc.doSave();
		} catch (CoreException e) {
			e.printStackTrace();
		}
		
		return config;
	}

