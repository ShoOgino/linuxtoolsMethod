        @Override
        public String isValid(String newText) {
            // Sanity check
            if (newText.length() == 0) {
                return ""; //$NON-NLS-1$
            }

            // Cannot contain invalid characters
            int index = newText.indexOf('/');
            if (index == -1) {
                index = newText.indexOf('\\');
            }

            if (index != -1) {
                String format = OprofileUiMessages
                        .getString("savedialog.validator.invalidChar"); //$NON-NLS-1$
				return MessageFormat.format(format, newText.substring(index, index + 1), newText);
            }

            // Cannot contain whitespace
            if (newText.contains(" ") || newText.contains("\t")) { //$NON-NLS-1$ //$NON-NLS-2$
                String format = OprofileUiMessages
                        .getString("savedialog.validator.containsWhitespace"); //$NON-NLS-1$
                return MessageFormat.format(format, newText);
            }

            if (session.existsSession(newText)) {
                String format = OprofileUiMessages
                        .getString("savedialog.validator.exists"); //$NON-NLS-1$
                return MessageFormat.format(format, newText);
            }

            // Must not already exist (opcontrol doesn't allow it)

            try {
                proxy = RemoteProxyManager.getInstance().getFileProxy(
                        Oprofile.OprofileProject.getProject());
            } catch (CoreException e) {
                e.printStackTrace();
            }

            IFileStore fileStore = proxy.getResource(Oprofile
                    .getDefaultSamplesDirectory() + newText);
            if (fileStore.fetchInfo().exists()) {
                String format = OprofileUiMessages
                        .getString("savedialog.validator.exists"); //$NON-NLS-1$
                return MessageFormat.format(format, newText);
            }

            // Everything OK
            return null;
        }

