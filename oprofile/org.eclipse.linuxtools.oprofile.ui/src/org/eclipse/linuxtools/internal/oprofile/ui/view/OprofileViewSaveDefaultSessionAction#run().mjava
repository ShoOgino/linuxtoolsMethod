    @Override
    public void run() {
        boolean defaultSessionExists = false;
        UiModelRoot modelRoot = UiModelRoot.getDefault();
        String defaultSessionName = null;
        IUiModelElement[] modelEvents = null;

        if (modelRoot.hasChildren()) {
            IUiModelElement[] sessions = modelRoot.getChildren();
            for (IUiModelElement e : sessions) {
                if (e instanceof UiModelError)
                    break;

                if (e instanceof UiModelSession) {

                    if (((UiModelSession) e).isDefaultSession()) {
                        defaultSessionExists = true;
                        defaultSessionName = e.getLabelText();
                        modelEvents = ((UiModelSession) e).getChildren();
                        break;
                    }

                    if (defaultSessionExists)
                        break;
                }
            }

            if (defaultSessionExists) {
                // the following code was originially written by Keith Seitz
                InputDialog dialog = new InputDialog(
                        OprofileUiPlugin.getActiveWorkbenchShell(),
                        OprofileUiMessages.getString("savedialog.title"), //$NON-NLS-1$
                        OprofileUiMessages.getString("savedialog.message"), //$NON-NLS-1$
                        OprofileUiMessages.getString("savedialog.initial"), //$NON-NLS-1$
                        new SaveSessionValidator());

                int result = dialog.open();
				if (result == Window.OK) {
					SessionManager.saveSession(dialog.getValue());

					// remove the default session
                    for (int i = 0; i < modelEvents.length; i++) {
                        SessionManager.deleteSession(defaultSessionName, modelEvents[i].getLabelText());
                    }

					if (Oprofile.OprofileProject.OPERF_BINARY.equals(Oprofile.OprofileProject.getProfilingBinary())) {
						// remove oprofile_data so current event no longer
						// be there
						OprofileViewDeleteSessionAction.deleteOperfDataFolder(
								Oprofile.OprofileProject.getProject().getFolder(Oprofile.OprofileProject.OPERF_DATA));
					}
					OprofileUiPlugin.getDefault().getOprofileView().refreshView();
				}
            } else {
                MessageDialog
                        .openError(
                                OprofileUiPlugin.getActiveWorkbenchShell(),
                                OprofileUiMessages
                                        .getString("defaultsessiondialog.nodefaultsession.title"), //$NON-NLS-1$
                                OprofileUiMessages
                                        .getString("defaultsessiondialog.nodefaultsession.message")); //$NON-NLS-1$
            }
        }
    }

