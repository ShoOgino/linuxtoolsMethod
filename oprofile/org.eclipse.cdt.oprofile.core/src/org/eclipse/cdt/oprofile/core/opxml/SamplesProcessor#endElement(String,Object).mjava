	/* (non-Javadoc)
	 * @see org.eclipse.cdt.oprofile.core.opxml.XMLProcessor#endElement(java.lang.String, java.lang.Object)
	 */
	public void endElement(String name, Object callData) {
		if (name.equals(SAMPLE_TAG)) {
			Sample sample = _sampleProcessor.getSample();
			_currentImage.addSample(sample);
			CallData cdata = (CallData) callData;
			if (cdata.monitor != null) {
				cdata.monitor.worked(sample.getSampleCount());
			}
		} else if (name.equals(IMAGE_TAG)) {
			if (_imageStack.isEmpty()) {
				// Finished image -- add to session
				_session.addSampleContainer(_currentImage);
				_currentImage = null;
			} else {
				// Dependency -- add to image on stack
				ProfileImage dep = _currentImage;
				_currentImage = (ProfileImage) _imageStack.pop();
				_currentImage.addSampleContainer(dep);
			}
		} else if (name.equals(SAMPLEFILE_TAG)) {
			_currentImage.setSampleFile(_characters);
		} else if (name.equalsIgnoreCase(HEADER_TAG)) {
			// Save header map into samplefile
			HashMap map = _headerProcessor.getMap();
			_currentImage.setHeader(map);
		} else {
			super.endElement(name, callData);
		}
	}

