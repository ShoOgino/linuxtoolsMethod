    @Test
    public void testEventLaunch() throws CoreException {
        TestingOprofileLaunchConfigurationDelegate delegate = new TestingOprofileLaunchConfigurationDelegate();
        ILaunch launch = new Launch(config, ILaunchManager.PROFILE_MODE, null);

        ILaunchConfigurationWorkingCopy wc = config.getWorkingCopy();
        wc.setAttribute(OprofileLaunchPlugin.ATTR_USE_DEFAULT_EVENT, false);
        wc.setAttribute(OprofileLaunchPlugin.attrConterEnabled(0), true);
        wc.setAttribute(OprofileLaunchPlugin.attrCounterCount(0), 100000);
        wc.setAttribute(OprofileLaunchPlugin.attrConterEvent(0, 0), "FAKE_EVENT"); //$NON-NLS-1$
        wc.setAttribute(OprofileLaunchPlugin.attrCounterProfileKernel(0), true);
        wc.setAttribute(OprofileLaunchPlugin.attrCounterProfileUser(0), true);
        wc.setAttribute(OprofileLaunchPlugin.attrCounterUnitMask(0), 0);
        wc.doSave();
        LaunchTestingOptions options = new LaunchTestingOptions();
        options.setOprofileProject(proj.getProject());
        options.loadConfiguration(config);
        assertTrue(options.isValid());
        assertTrue(options.getBinaryImage().isEmpty());
        assertTrue(options.getKernelImageFile().isEmpty());
        assertEquals(OprofileDaemonOptions.SEPARATE_NONE, options.getSeparateSamples());

        Oprofile.OprofileProject.setProfilingBinary(Oprofile.OprofileProject.OPCONTROL_BINARY);
        delegate.launch(config, ILaunchManager.PROFILE_MODE, launch, null);
    }

