	/**
	 * Return a list of all the Samples in the given session.
	 * @param session the session for which to get samples
	 * @param shell the composite shell to use for the progress dialog
	 */
	public static OpModelImage getModelData(String eventName, String sessionName) {		
		OpModelImage image = new OpModelImage();
		
		final IRunnableWithProgress opxml;
		try {
			opxml = OprofileCorePlugin.getDefault().getOpxmlProvider().modelData(eventName, sessionName, image);
			opxml.run(null);
		} catch (InvocationTargetException e) { 
		} catch (InterruptedException e) { 
		} catch (OpxmlException e) {
			_showErrorDialog("opxmlProvider", e); //$NON-NLS-1$
			return null;
		}

		return image;

//		if (shell != null) {
//			IRunnableWithProgress runnable = new IRunnableWithProgress() {
//				
//				public void run(IProgressMonitor monitor) throws InvocationTargetException, InterruptedException {
//					Object[] fmtArgs = null;
//					String key = null;
//					if (session.isDefaultSession()) {
//						key = "getSamples.caption.default-session"; //$NON-NLS-1$
//						fmtArgs = new Object[0];
//					} else {
//						key = "getSamples.caption"; //$NON-NLS-1$
//						fmtArgs = new Object[] {session.getExecutableName()};
//					}
//					
//					String caption = MessageFormat.format(OprofileProperties.getString(key), fmtArgs);
//					monitor.beginTask(caption, 1);				
//					opxml.run(monitor);
//					monitor.done();
//				}
//			};
//
//			ProgressMonitorDialog dialog = new ProgressMonitorDialog(shell);
//			try {
//				dialog.run(true, false, runnable);
//			} catch (InterruptedException ie) {
//			} catch (InvocationTargetException e) {
//			}
//		} else {
//			// No shell -- just run opxml without a ProgressMonitor
//			try {
//				opxml.run(null);
//			} catch (InvocationTargetException e) {
//			} catch (InterruptedException e) {
//			}
//		}
	}

