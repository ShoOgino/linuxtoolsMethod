	public ValgrindXMLParser(InputStream in) throws ParserConfigurationException, IOException, CoreException, SAXException {
		builder = DocumentBuilderFactory.newInstance().newDocumentBuilder();
		errors = new ArrayList<ValgrindError>();

		StringBuffer xmlBuf = new StringBuffer();
		StringBuffer plainBuf = new StringBuffer();
		separateOutput(in, xmlBuf, plainBuf);

		// any plaintext in memcheck output is an error
		String err = plainBuf.toString().trim();
		if (err.length() > 0) {
			throw new CoreException(new Status(IStatus.ERROR, ValgrindPlugin.PLUGIN_ID, err));
		}

		InputSource is = new InputSource(new ByteArrayInputStream(xmlBuf.toString().getBytes()));
		Document doc = builder.parse(is);

		NodeList nodes = doc.getElementsByTagName("error"); //$NON-NLS-1$
		for (int i = 0; i < nodes.getLength(); i++) {
			errors.add(new ValgrindError(nodes.item(i)));
		}
	}

