	@Override
	public int read(byte[] b, int off, int len) throws IOException {
		if (b == null) {
			throw new NullPointerException();
		} else if (off < 0 || len < 0 || len > b.length - off) {
			throw new IndexOutOfBoundsException();
		} else if (len == 0) {
			return 0;
		}
		
		if (eos) {
			return -1;
		}
		
		read1(len);
		
		// Check again if we read EOS
		if (eos) {
			return -1;
		}
		
		// Did we read less than requested?
		if (buf.length < len) {
			len = buf.length;
		}
		
		System.arraycopy(buf, 0, b, off, len);
		return len;
	}

