	public MassifParser(File inputFile) throws IOException {
		ArrayList<MassifSnapshot> list = new ArrayList<MassifSnapshot>();
		
		BufferedReader br = new BufferedReader(new FileReader(inputFile));
		String line;
		MassifSnapshot snapshot = null;
		String cmd = null;
		TimeUnit unit = null;  
		int n = 0;
		while ((line = br.readLine()) != null) {
			if (line.startsWith(CMD + COLON)){
				cmd = parseStrValue(line, COLON + SPACE);
			}
			else if (line.startsWith(TIME_UNIT + COLON)) {
				unit = parseTimeUnit(line);
			}			
			else if (line.startsWith(SNAPSHOT)) {
				if (snapshot != null) {
					// this snapshot finished parsing
					list.add(snapshot);
					n++;
				}
				snapshot = new MassifSnapshot(n);
				snapshot.setCmd(cmd);
				snapshot.setUnit(unit);
			}
			else if (line.startsWith(TIME + EQUALS)) {
				snapshot.setTime(parseIntValue(line, EQUALS));
			}
			else if (line.startsWith(MEM_HEAP_B + EQUALS)) {
				snapshot.setHeapBytes(parseIntValue(line, EQUALS));
			}
			else if (line.startsWith(MEM_HEAP_EXTRA_B + EQUALS)) {
				snapshot.setHeapExtra(parseIntValue(line, EQUALS));
			}
			else if (line.startsWith(MEM_STACKS_B + EQUALS)) {
				snapshot.setStacks(parseIntValue(line, EQUALS));
			}
			else if (line.startsWith(HEAP_TREE + EQUALS)) {
				SnapshotType type = parseSnapshotType(line);
				snapshot.setType(type);
				switch (type) {
				case DETAILED:
				case PEAK:
					MassifHeapTreeNode node = parseTree(snapshot, null, br);
					node.setText(NLS.bind(Messages.getString("MassifParser.Snapshot_n"), n, node.getText())); // prepend snapshot number //$NON-NLS-1$
					snapshot.setRoot(node);
				}
			}
		}
		if (snapshot != null) {
			// last snapshot that finished parsing
			list.add(snapshot);
		}
		snapshots = list.toArray(new MassifSnapshot[list.size()]);
	}

