	public void testChartCallback() throws Exception {
		ILaunchConfiguration config = createConfiguration(proj.getProject());
		doLaunch(config, "testChartCallback"); //$NON-NLS-1$

		ValgrindViewPart view = ValgrindUIPlugin.getDefault().getView();
		IAction chartAction = getChartAction(view);
		assertNotNull(chartAction);
		chartAction.run();

		IEditorPart part = PlatformUI.getWorkbench().getActiveWorkbenchWindow().getActivePage().getActiveEditor();
		if (part instanceof ChartEditor) {
			ChartControl control = ((ChartEditor) part).getControl();
			Event event = new Event();
			event.button = 1;
			event.count = 1;
			event.widget = control;
			MouseEvent mEvent = new MouseEvent(event);
			DataPointHints source = new DataPointHints(null, null, null, null, null, null, null, null, null, 4, null, 0, null);
			control.callback(mEvent, new WrappedStructureSource(source), null);

			TableViewer viewer = ((MassifViewPart) view.getDynamicView()).getTableViewer();
			MassifSnapshot[] snapshots = (MassifSnapshot[]) viewer.getInput();
			MassifSnapshot snapshot = (MassifSnapshot) ((StructuredSelection) viewer.getSelection()).getFirstElement();
			assertEquals(4, Arrays.asList(snapshots).indexOf(snapshot));
		} else {
			fail();
		}
	}

