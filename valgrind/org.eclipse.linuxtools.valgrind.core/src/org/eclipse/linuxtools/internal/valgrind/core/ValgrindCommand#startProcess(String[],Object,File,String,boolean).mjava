	protected Process startProcess(String[] commandArray, Object env, File workDir, String binPath, boolean usePty) throws IOException {
		if (workDir == null) {
			return ProcessFactory.getFactory().exec(commandArray, (String[]) env);
		}
		if (PTY.isSupported() && usePty) {
			return ProcessFactory.getFactory().exec(commandArray, (String[]) env, workDir, new PTY());
		}
		else {
			return ProcessFactory.getFactory().exec(commandArray, (String[]) env, workDir);
		}
	}

